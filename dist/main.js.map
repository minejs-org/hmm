{"version":3,"sources":["../src/app/mod/templateRegistry.ts","../src/app/index.ts","../src/app/mod/spaceManager.ts","../src/app/mod/jsonFormatter.ts","../src/app/mod/packageManager.ts","../src/app/mod/promptHelper.ts","../src/app/mod/loader.ts","../src/main.ts"],"names":["templateRegistry_exports","__export","TemplateRegistry","init_templateRegistry","__esmMin","type","includeUnready","templates","t","defaultTemplate","template","typeConfig","cli","fs","path","PACKAGE_JSON_KEY_ORDER","SPACE_FILE_KEY_ORDER","JsonFormatter","obj","options","indent","alignColons","sortKeys","tabWidth","keyOrder","globalMaxKeyLength","maxIndentWidth","filePath","content","formatted","dirPath","jsonFiles","traverse","currentPath","entry","fullPath","results","error","currentDepth","maxDepth","item","depth","value","keys","sortAlphabetically","orderedKeys","unorderedKeys","key","a","b","maxLength","keyLength","arr","currentIndent","currentIndentWidth","jsonKey","isNestedObject","indentDiff","keyDiff","padding","__require","targetDir","file","relative","SpaceManager","basePath","config","spacePath","targetPath","createdDir","configPath","repoUrl","execSync","gitPath","e","isOrgProject","hasGithubId","githubOwner","gitUrl","homepage","issuesUrl","packageTag","tagBadge","authorUrl","allFiles","packageJson","oldBinName","binPath","arrayOfFiles","configWithDefaults","configContent","maxRetries","i","resolve","PackageManagerWrapper","packages","args","packageNames","packageList","script","scriptCommand","command","loader","access","proc","stderr","pkgPath","pkg","input","select","confirm","PromptHelper","params","name","description","author","orgRegex","simpleRegex","libReady","cliReady","serverReady","webReady","allTemplates","templateChoices","statusEmoji","statusText","packageManager","authorEmail","githubId","keywordsInput","keywords","k","license","spaceName","tag","shouldRemove","message","defaultValue","rl","defaultText","answer","currentPackages","packagesInput","isDev","p","dirName","nextSteps","step","Loader","successMessage","errorMessage","spawnSync","App","_App","fullName","match","answers","org","currentDirName","kwString","parsedPackages","installAnswers","updateAnswers","scriptName","silently","testPath","mainFile","result","possiblePaths","packageJsonPath","publishAnswers","app"],"mappings":"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","sourcesContent":["// src/app/mod/templateRegistry.ts\r\n//\r\n// Developed with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import type { SpaceType, SpaceTypeConfig, TemplateVariant } from '../../types.d';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    export class TemplateRegistry {\r\n\r\n        // ┌──────────────────────────────── INIT ──────────────────────────────┐\r\n\r\n            private static readonly TEMPLATES: Record<SpaceType, SpaceTypeConfig> = {\r\n                lib: {\r\n                    type: 'lib',\r\n                    defaultTemplate: 'clean',\r\n                    templates: [\r\n                        {\r\n                            name: 'clean',\r\n                            label: 'Clean Library',\r\n                            description: 'Zero dependencies - just TypeScript and build tools',\r\n                            repo: 'lib',\r\n                            requiresSetup: false,\r\n                            ready: true\r\n                        }\r\n                    ]\r\n                },\r\n\r\n                server: {\r\n                    type                    : 'server',\r\n                    defaultTemplate         : 'clean',\r\n                    templates               : [\r\n                        {\r\n                            name            : 'clean',\r\n                            label           : 'Clean Server',\r\n                            description     : 'Comes with @minejs/server library for quick server development',\r\n                            repo            : 'server',\r\n                            deps            : ['@minejs/server'],\r\n                            requiresSetup   : true,\r\n                            ready           : true\r\n                        },\r\n                    ]\r\n                },\r\n\r\n                cli: {\r\n                    type: 'cli',\r\n                    defaultTemplate: 'clean',\r\n                    templates: [\r\n                        {\r\n                            name: 'clean',\r\n                            label: 'Clean CLI',\r\n                            description: 'Comes with @minejs/cli library for quick CLI development',\r\n                            repo: 'cli',\r\n                            deps: ['@minejs/cli'],\r\n                            requiresSetup: true,\r\n                            ready: true\r\n                        }\r\n                    ]\r\n                },\r\n\r\n                app: {\r\n                    type: 'app',\r\n                    defaultTemplate: 'clean',\r\n                    templates: [\r\n                        {\r\n                            name: 'clean',\r\n                            label: 'Clean Web App',\r\n                            description: 'Comes with @cruxjs framework for quick web development',\r\n                            repo: 'app',\r\n                            deps: ['@cruxjs/app'],\r\n                            requiresSetup: true,\r\n                            ready: true\r\n                        },\r\n                    ]\r\n                },\r\n            };\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n\r\n        // ┌──────────────────────────────── MAIN ──────────────────────────────┐\r\n\r\n            /**\r\n             * Get all templates for a space type\r\n             */\r\n            static getTemplatesForType(type: SpaceType, includeUnready: boolean = false): SpaceTypeConfig['templates'] {\r\n                const templates = this.TEMPLATES[type]?.templates || [];\r\n                return includeUnready ? templates : templates.filter(t => t.ready);\r\n            }\r\n\r\n            /**\r\n             * Get only ready templates for a space type\r\n             */\r\n            static getReadyTemplatesForType(type: SpaceType): SpaceTypeConfig['templates'] {\r\n                return this.getTemplatesForType(type, false);\r\n            }\r\n\r\n            /**\r\n             * Get default template for a space type\r\n             */\r\n            static getDefaultTemplate(type: SpaceType): TemplateVariant {\r\n                const templates = this.TEMPLATES[type];\r\n                if (!templates) return 'clean';\r\n\r\n                // Try to find a ready template that matches the default\r\n                const defaultTemplate = templates.templates.find(\r\n                    t => t.name === templates.defaultTemplate && t.ready\r\n                );\r\n\r\n                if (defaultTemplate) {\r\n                    return defaultTemplate.name;\r\n                }\r\n\r\n                // Fallback to first ready template\r\n                const firstReady = templates.templates.find(t => t.ready);\r\n                return firstReady?.name || templates.defaultTemplate;\r\n            }\r\n\r\n            /**\r\n             * Get template configuration\r\n             */\r\n            static getTemplate(type: SpaceType, template: TemplateVariant) {\r\n                const typeConfig = this.TEMPLATES[type];\r\n                if (!typeConfig) return null;\r\n\r\n                return typeConfig.templates.find(t => t.name === template);\r\n            }\r\n\r\n            /**\r\n             * Check if template is ready for use\r\n             */\r\n            static isTemplateReady(type: SpaceType, template: TemplateVariant): boolean {\r\n                const config = this.getTemplate(type, template);\r\n                return config?.ready || false;\r\n            }\r\n\r\n            /**\r\n             * Validate template variant for a space type\r\n             */\r\n            static isValidTemplate(type: SpaceType, template: TemplateVariant): boolean {\r\n                const templates = this.getTemplatesForType(type);\r\n                return templates.some(t => t.name === template);\r\n            }\r\n\r\n            /**\r\n             * Get repository name for a template\r\n             */\r\n            static getRepoName(type: SpaceType, template: TemplateVariant): string {\r\n                const config = this.getTemplate(type, template);\r\n                return config?.repo || 'ready-lib';\r\n            }\r\n\r\n            /**\r\n             * Get all space types\r\n             */\r\n            static getSpaceTypes(): SpaceType[] {\r\n                return Object.keys(this.TEMPLATES) as SpaceType[];\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/app/index.ts\r\n//\r\n// Developed with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { cli }                          from '@minejs/cli';\r\n    import * as types                       from \"../types.d\";\r\n    import { SpaceManager }                 from './mod/spaceManager';\r\n    import { PackageManagerWrapper }        from './mod/packageManager';\r\n    import { PromptHelper }                 from './mod/promptHelper';\r\n    import { Loader }                       from './mod/loader';\r\n    import { spawnSync }                    from 'child_process';\r\n    import * as path                        from 'path';\r\n    import * as fs                          from 'fs';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    export class App {\r\n\r\n        // ┌──────────────────────────────── INIT ──────────────────────────────┐\r\n\r\n            private spaceManager    : SpaceManager;\r\n            private pm              : PackageManagerWrapper | null = null;\r\n\r\n            constructor(\r\n                public config       : types.AppConfig\r\n            ) {\r\n                this.spaceManager   = new SpaceManager();\r\n                this.initPackageManager();\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n\r\n        // ┌──────────────────────────────── MAIN ──────────────────────────────┐\r\n\r\n            static create(config: types.AppConfig): App {\r\n                return new App(config);\r\n            }\r\n\r\n            run() {\r\n                // CLI Setup\r\n                cli(this.config.name, this.config.version).description(this.config.desc)\r\n\r\n                // ═══════════════════════════ SPACE COMMANDS ═══════════════════════════\r\n\r\n                // 'init' command - create new spaces\r\n                .command({\r\n                    name            : 'init',\r\n                    description     : 'Create a new space (lib or cli)',\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'name',\r\n                            required    : false,\r\n                            default     : 'my-space',\r\n                            description : 'Name of the space (supports @org/name format)'\r\n                        }\r\n                    ],\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'type',\r\n                            flag        : '-t',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Type of space (lib or cli)'\r\n                        },\r\n                        {\r\n                            name        : 'description',\r\n                            flag        : '--desc',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Description of the space'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.InitCommandParams) => this.createNewSpaceOnGroundViaCLI(params)\r\n                })\r\n\r\n\r\n                // 'lint' command - run linter\r\n                .command({\r\n                    name            : 'lint',\r\n                    description     : 'Run linter for the current space',\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'fix',\r\n                            flag        : '--fix',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Automatically fix linting issues'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.LintParams) => this.runLint(params)\r\n                })\r\n\r\n                // 'info' command - show space information\r\n                .command({\r\n                    name            : 'info',\r\n                    description     : 'Show current space information',\r\n                    action          : () => this.showSpaceInfo()\r\n                })\r\n\r\n                // ═══════════════════════════ PACKAGE MANAGER COMMANDS ═══════════════════════════\r\n\r\n                // 'install' or 'i' command - install packages\r\n                .command({\r\n                    name            : 'install',\r\n                    aliases         : ['i'],\r\n                    description     : 'Install packages',\r\n                    allowDynamicArgs: true,\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'packages',\r\n                            required    : false,\r\n                            description : 'Packages to install (space-separated)'\r\n                        }\r\n                    ],\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'dev',\r\n                            flag        : '--dev',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Install as dev dependency'\r\n                        },\r\n                        {\r\n                            name        : 'global',\r\n                            flag        : '--global',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Install globally'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.InstallParams) => this.installPackages(params)\r\n                })\r\n\r\n                // 'remove' or 'r' command - remove packages\r\n                .command({\r\n                    name            : 'remove',\r\n                    aliases         : ['r'],\r\n                    description     : 'Remove packages',\r\n                    allowDynamicArgs: true,\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'packages',\r\n                            required    : true,\r\n                            description : 'Packages to remove (space-separated)'\r\n                        }\r\n                    ],\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'global',\r\n                            flag        : '--global',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Remove globally'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.RemoveParams) => this.removePackages(params)\r\n                })\r\n\r\n                // 'update' or 'up' command - update packages\r\n                .command({\r\n                    name            : 'update',\r\n                    aliases         : ['up'],\r\n                    description     : 'Update packages',\r\n                    allowDynamicArgs: true,\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'packages',\r\n                            required    : false,\r\n                            description : 'Packages to update (space-separated, or all if empty)'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.UpdateParams) => this.updatePackages(params)\r\n                })\r\n\r\n                // 'link' command - link package globally OR link global package to project\r\n                .command({\r\n                    name            : 'link',\r\n                    description     : 'Link package globally (no args) or link global package(s) to project (with package name(s))',\r\n                    allowDynamicArgs: true,\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'package',\r\n                            required    : false,\r\n                            description : 'Package name(s) to link from global (optional, supports multiple)'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.LinkParams) => this.linkPackage(params)\r\n                })\r\n\r\n                // 'unlink' command - unlink package globally OR unlink global package from project\r\n                .command({\r\n                    name            : 'unlink',\r\n                    description     : 'Unlink package globally (no args) or unlink global package(s) from project (with package name(s))',\r\n                    allowDynamicArgs: true,\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'package',\r\n                            required    : false,\r\n                            description : 'Package name(s) to unlink from global (optional, supports multiple)'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.LinkParams) => this.unlinkPackage(params)\r\n                })\r\n\r\n                // 'list' or 'ls' command - list installed packages\r\n                .command({\r\n                    name            : 'list',\r\n                    aliases         : ['ls'],\r\n                    description     : 'List installed packages',\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'global',\r\n                            flag        : '--global',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'List global packages'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.ListParams) => this.listPackages(params)\r\n                })\r\n\r\n                // ═══════════════════════════ BUILD & TEST COMMANDS ═══════════════════════════\r\n\r\n                // 'build' command - build the space\r\n                .command({\r\n                    name            : 'build',\r\n                    description     : 'Build the current space',\r\n                    action          : () => this.buildSpace()\r\n                })\r\n\r\n                // 'test' command - run tests\r\n                .command({\r\n                    name            : 'test',\r\n                    description     : 'Run tests for the current space',\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'path',\r\n                            required    : false,\r\n                            description : 'Specific test file or folder (optional)'\r\n                        }\r\n                    ],\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'coverage',\r\n                            flag        : '--coverage',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Generate code coverage report'\r\n                        },\r\n                        {\r\n                            name        : 'watch',\r\n                            flag        : '--watch',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Run tests in watch mode'\r\n                        },\r\n                        {\r\n                            name        : 'bail',\r\n                            flag        : '--bail',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Exit on first test failure'\r\n                        },\r\n                        {\r\n                            name        : 'timeout',\r\n                            flag        : '--timeout',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Set test timeout in milliseconds'\r\n                        },\r\n                        {\r\n                            name        : 'rerun-each',\r\n                            flag        : '--rerun-each',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Re-run each test N times'\r\n                        },\r\n                        {\r\n                            name        : 'concurrent',\r\n                            flag        : '--concurrent',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Run tests concurrently'\r\n                        },\r\n                        {\r\n                            name        : 'coverage-reporter',\r\n                            flag        : '--coverage-reporter',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Coverage reporter format (text, lcov, etc.)'\r\n                        },\r\n                        {\r\n                            name        : 'test-name-pattern',\r\n                            flag        : '-t',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Filter tests by name pattern'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.TestParams) => this.runTests(params)\r\n                })\r\n\r\n                // 'run' command - run any script from package.json\r\n                .command({\r\n                    name                : 'run',\r\n                    description         : 'Run any script from package.json',\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'script',\r\n                            required    : true,\r\n                            description : 'Script name from package.json'\r\n                        }\r\n                    ],\r\n\r\n                    allowDynamicArgs    : true,    // Allow additional arguments\r\n                    allowDynamicOptions : true,    // Allow additional options\r\n\r\n                    action: (params: types.RunScriptParams) => this.runScript(params)\r\n                })\r\n\r\n                // 'clean' command - clean build artifacts\r\n                .command({\r\n                    name            : 'clean',\r\n                    description     : 'Clean build artifacts',\r\n                    action          : () => this.clean()\r\n                })\r\n\r\n                // 'start' command - start the main file\r\n                .command({\r\n                    name                : 'start',\r\n                    description         : 'Start the main file',\r\n                    allowDynamicArgs    : true,    // Allow any arguments to pass through\r\n                    allowDynamicOptions : true,    // Allow any options to pass through\r\n                    action              : (params: types.StartParams) => this.startMain(params)\r\n                })\r\n\r\n                // ═══════════════════════════ PUBLISH COMMAND ═══════════════════════════\r\n\r\n                // 'publish' command - publish to npm\r\n                .command({\r\n                    name            : 'publish',\r\n                    description     : 'Publish space to npm registry',\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'tag',\r\n                            flag        : '--tag',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Publish with tag (e.g., beta, next)'\r\n                        },\r\n                        {\r\n                            name        : 'access',\r\n                            flag        : '--access',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Access level (public or restricted)'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.PublishParams) => this.publish(params)\r\n                })\r\n\r\n                // Build and run CLI\r\n                .build().run();\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n\r\n        // ┌──────────────────────────────── HELP ──────────────────────────────┐\r\n\r\n            static defaultConfig(): types.AppConfig {\r\n                return {\r\n                    name    : 'Space',\r\n                    version : '0.0.1',\r\n                    desc    : 'Build flexible spaces for any platform',\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Initialize package manager based on space config\r\n             */\r\n            private initPackageManager() {\r\n                if (this.spaceManager.isSpace()) {\r\n                    // Always use bun - no need to check config\r\n                    this.pm = new PackageManagerWrapper();\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Ensure we're in a space directory\r\n             */\r\n            private ensureSpace(): boolean {\r\n                if (!this.spaceManager.isSpace()) {\r\n                    console.error('✘ Not a space directory. Run \"space init <name> -t lib|cli\" first.');\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n\r\n            /**\r\n             * Parse package name to extract org and name\r\n             * Examples:\r\n             *   \"@minejs/ast\" -> { org: \"minejs\", name: \"ast\" }\r\n             *   \"my-package\" -> { org: \"\", name: \"my-package\" }\r\n             */\r\n            private parsePackageName(fullName: string): { org: string; name: string } {\r\n                const orgRegex = /^@([a-z0-9-_]+)\\/([a-z0-9-_]+)$/i;\r\n                const match = fullName.match(orgRegex);\r\n\r\n                if (match) {\r\n                    return {\r\n                        org: match[1],\r\n                        name: match[2]\r\n                    };\r\n                }\r\n\r\n                return {\r\n                    org: '',\r\n                    name: fullName\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Delete directory with retry logic for Windows file locking issues\r\n             */\r\n            private async deleteDirectoryWithRetry(dirPath: string, maxRetries: number = 3): Promise<void> {\r\n                for (let i = 0; i < maxRetries; i++) {\r\n                    try {\r\n                        // Try to delete\r\n                        fs.rmSync(dirPath, { recursive: true, force: true, maxRetries: 3, retryDelay: 100 });\r\n\r\n                        // Verify deletion\r\n                        if (!fs.existsSync(dirPath)) {\r\n                            return; // Success!\r\n                        }\r\n                    } catch (error: unknown) {\r\n                        if (i === maxRetries - 1) {\r\n                            // Last attempt failed\r\n                            throw error;\r\n                        }\r\n\r\n                        // Wait before retry (increasing delay)\r\n                        await new Promise(resolve => setTimeout(resolve, 500 * (i + 1)));\r\n                    }\r\n                }\r\n\r\n                throw new Error('Failed to delete directory after multiple attempts');\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n\r\n        // ┌──────────────────────────────── SPACE ──────────────────────────────┐\r\n\r\n            /**\r\n             * Create a new space via CLI\r\n             */\r\n            private async createNewSpaceOnGroundViaCLI(params: types.InitCommandParams) {\r\n                try {\r\n                    // Prompt for missing parameters\r\n                    const answers = await PromptHelper.promptInit({\r\n                        type            : params.options.type,\r\n                        template        : params.options.template,\r\n\r\n                        org             : '',\r\n                        name            : params.args.name,\r\n                        desc            : params.options.desc,\r\n                    });\r\n\r\n                    // Parse package name to extract org and actual name\r\n                    const { org, name } = this.parsePackageName(answers.name);\r\n\r\n                    // Validate type\r\n                    if (!['lib', 'cli', 'server', 'web'].includes(answers.type)) {\r\n                        PromptHelper.showError('Invalid space type. Must be lib, cli, server or web.');\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    // Validate template\r\n                    const { TemplateRegistry } = await import('./mod/templateRegistry');\r\n                    if (!TemplateRegistry.isValidTemplate(answers.type, answers.template as types.TemplateVariant)) {\r\n                        PromptHelper.showError('Invalid template for this space type.');\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    // Check if template is ready\r\n                    if (!TemplateRegistry.isTemplateReady(answers.type, answers.template as types.TemplateVariant)) {\r\n                        PromptHelper.showError('This template is not ready yet. Please choose another template.');\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    // Determine the target space path\r\n                    let spacePath: string | undefined;\r\n\r\n                    // Get current directory name\r\n                    const currentDirName = path.basename(process.cwd());\r\n\r\n                    // Check if name is empty and ask if user wants to use current directory\r\n                    if (!name || name.trim() === '') {\r\n                        const useCurrentDir = await PromptHelper.promptUseCurrentDir(currentDirName);\r\n\r\n                        if (useCurrentDir) {\r\n                            spacePath = process.cwd();\r\n                        } else {\r\n                            PromptHelper.showError('Space name is required when not using current directory');\r\n                            process.exit(1);\r\n                        }\r\n                    }\r\n                    // Check if folder name matches project name\r\n                    else if (currentDirName === name) {\r\n                        const useCurrentDir = await PromptHelper.promptUseCurrentDir(name);\r\n\r\n                        if (useCurrentDir) {\r\n                            spacePath = process.cwd();\r\n                        }\r\n                    }\r\n\r\n                    // If spacePath not set, use default (create subdirectory)\r\n                    if (!spacePath) {\r\n                        spacePath = path.join(process.cwd(), name);\r\n                    }\r\n\r\n                    // Check if space path already exists\r\n                    if (fs.existsSync(spacePath)) {\r\n                        const isDir = fs.statSync(spacePath).isDirectory();\r\n                        if (!isDir) {\r\n                            PromptHelper.showError(`Path \"${spacePath}\" exists but is not a directory`);\r\n                            process.exit(1);\r\n                        }\r\n\r\n                        // Directory exists, ask user what to do\r\n                        const shouldDelete = await PromptHelper.promptDeleteExistingDir(spacePath);\r\n\r\n                        if (!shouldDelete) {\r\n                            PromptHelper.showInfo('Space creation cancelled');\r\n                            process.exit(0);\r\n                        }\r\n\r\n                        // Delete the directory with retry logic\r\n                        try {\r\n                            await this.deleteDirectoryWithRetry(spacePath);\r\n                        } catch (error: unknown) {\r\n                            if (error instanceof Error) {\r\n                                const isLockError = error.message &&\r\n                                    (error.message.includes('EBUSY') ||\r\n                                    error.message.includes('EPERM') ||\r\n                                    error.message.includes('resource busy'));\r\n\r\n                                if (isLockError) {\r\n                                    PromptHelper.showError(\r\n                                        `Cannot delete directory - it's being used by another program.\\n\\n` +\r\n                                        `Please try:\\n` +\r\n                                        `  1. Close any terminals/editors with \"${spacePath}\" open\\n` +\r\n                                        `  2. Navigate out of the directory in all terminals\\n` +\r\n                                        `  3. Run PowerShell/Terminal as Administrator\\n` +\r\n                                        `  4. Wait a few seconds and try again`\r\n                                    );\r\n                                } else {\r\n                                    PromptHelper.showError(\r\n                                        `Failed to delete existing directory.`,\r\n                                        error\r\n                                    );\r\n                                }\r\n                            } else {\r\n                                PromptHelper.showError(\r\n                                    `Failed to delete existing directory.`,\r\n                                    new Error('Unknown error')\r\n                                );\r\n                            }\r\n\r\n                            process.exit(1);\r\n                        }\r\n                    }\r\n\r\n                    // // Show info about org detection\r\n                    // if (org) {\r\n                    //     console.log(`― Detected organization: @${org}`);\r\n                    //     console.log(`― Package name: ${name}`);\r\n                    // }\r\n\r\n                    // // Show template info\r\n                    // const templateInfo = TemplateRegistry.getTemplate(answers.type, answers.template);\r\n                    // if (templateInfo?.deps) {\r\n                    //     console.log(`― Includes: ${templateInfo.deps.join(', ')}`);\r\n                    // }\r\n\r\n                    await this.spaceManager.createSpace({\r\n                        type            : answers.type,\r\n                        template        : answers.template as types.TemplateVariant,\r\n                        pm              : 'bun', // Always use bun\r\n\r\n                        repo           : {\r\n                            org        : org,\r\n                            name       : name,\r\n                            version    : '0.0.1',\r\n                            desc       : answers.description,\r\n                            kw         : answers.keywords.length > 0 ? answers.keywords : [],\r\n                            license    : answers.license || 'MIT',\r\n                        },\r\n\r\n                        author          : {\r\n                            id          : answers.githubId,\r\n                            name        : answers.author,\r\n                            email       : answers.authorEmail,\r\n                            url         : '', // Will be generated in spaceManager\r\n                        },\r\n\r\n                        createdAt       : new Date().toISOString()\r\n                    }, spacePath);\r\n\r\n                    PromptHelper.showSuccess(name, [\r\n                        spacePath === process.cwd() ? 'space install' :\r\n                        `cd ${name}`,\r\n                        `space install`,\r\n                        'space build'\r\n                    ]);\r\n                } catch (error) {\r\n                    PromptHelper.showError('Failed to create space', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Show information about current space\r\n             * Safely handles template placeholders and unexpected data types\r\n             */\r\n            private showSpaceInfo() {\r\n                if (!this.ensureSpace()) return;\r\n\r\n                const config = this.spaceManager.loadSpaceConfig();\r\n                if (!config) {\r\n                    console.error('✘ Could not load space configuration.');\r\n                    return;\r\n                }\r\n\r\n                console.log('');\r\n\r\n                // Safe access to org - check if it exists and is not empty\r\n                const hasOrg = config.repo?.org && config.repo.org.trim() !== '';\r\n                const fullName = hasOrg\r\n                    ? `${config.repo.org}/${config.repo.name}`\r\n                    : config.repo.name;\r\n\r\n                console.log(`Name:            ${fullName}`);\r\n                console.log(`Type:            ${config.type}`);\r\n                console.log(`Version:         ${config.repo.version}`);\r\n\r\n                // Safe description handling\r\n                if (config.repo.desc && config.repo.desc !== '{{desc}}' && config.repo.desc !== '{{description}}') {\r\n                    console.log(`Description:     ${config.repo.desc}`);\r\n                }\r\n\r\n                // Safe keywords handling - check if it's an array and not empty\r\n                if (config.repo.kw) {\r\n                    // Normalize to array if it's a string\r\n                    let keywords: string[] = [];\r\n\r\n                    if (Array.isArray(config.repo.kw)) {\r\n                        keywords = config.repo.kw.filter((k: unknown) =>\r\n                            k &&\r\n                            typeof k === 'string' &&\r\n                            k.trim() !== '' &&\r\n                            k !== '{{kw}}' &&\r\n                            k !== '{{keywords}}'\r\n                        );\r\n                    } else if (typeof config.repo.kw === 'string') {\r\n                        const kwString = config.repo.kw as string;\r\n                        if (kwString !== '{{kw}}' &&\r\n                            kwString !== '{{keywords}}' &&\r\n                            kwString.trim() !== '') {\r\n                            // If it's a string, try to split by comma\r\n                            keywords = kwString\r\n                                .split(',')\r\n                                .map((k: string) => k.trim())\r\n                                .filter((k: string) => k !== '');\r\n                        }\r\n                    }\r\n\r\n                    if (keywords.length > 0) {\r\n                        console.log(`Keywords:        ${keywords.join(', ')}`);\r\n                    }\r\n                }\r\n\r\n                // Safe license handling\r\n                if (config.repo.license && config.repo.license !== '{{license}}') {\r\n                    console.log(`License:         ${config.repo.license}`);\r\n                }\r\n\r\n                console.log(`PackageManager:  bun`);\r\n\r\n                // Safe author name handling\r\n                if (config.author?.name &&\r\n                    config.author.name !== '{{author}}' &&\r\n                    config.author.name !== '{{author_name}}') {\r\n                    console.log(`Author:          ${config.author.name}`);\r\n                }\r\n\r\n                console.log(`Created:         ${new Date(config.createdAt).toLocaleDateString()}`);\r\n\r\n                console.log('');\r\n            }\r\n\r\n            /**\r\n             * Run linter\r\n             */\r\n            private runLint(params?: types.LintParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const args: string[] = [];\r\n\r\n                // Add --fix flag if specified\r\n                if (params?.options?.fix) {\r\n                    args.push('--fix');\r\n                }\r\n\r\n                // Run lint with args\r\n                if (args.length > 0) {\r\n                    this.pm!.run('lint', args);\r\n                } else {\r\n                    this.pm!.run('lint');\r\n                }\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n\r\n        // ┌──────────────────────────────── PKG MGR ────────────────────────────┐\r\n\r\n            /**\r\n             * Install packages\r\n             */\r\n            private async installPackages(params: types.InstallParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                try {\r\n                    // Collect packages from both args and dynamicArgs\r\n                    let packages: string[] = [];\r\n\r\n                    if (params.args?.packages) {\r\n                        const parsedPackages = params.args.packages.split(' ').filter((p: string) => p.trim());\r\n                        packages.push(...parsedPackages);\r\n                    }\r\n\r\n                    if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                        packages.push(...params.dynamicArgs);\r\n                    }\r\n\r\n                    let isDev = params.options?.dev || false;\r\n\r\n                    // If no packages provided, prompt\r\n                    if (packages.length === 0) {\r\n                        const shouldInstallAll = await PromptHelper.promptConfirm(\r\n                            'No packages specified. Install all dependencies from package.json?',\r\n                            true\r\n                        );\r\n\r\n                        if (!shouldInstallAll) {\r\n                            const installAnswers    = await PromptHelper.promptInstall();\r\n                            packages                = installAnswers.packages;\r\n                            isDev                   = installAnswers.isDev;\r\n                        }\r\n                    }\r\n\r\n                    this.pm!.install(packages.length > 0 ? packages : undefined, {\r\n                        dev: isDev,\r\n                        global: params.options?.global\r\n                    });\r\n                } catch (error) {\r\n                    PromptHelper.showError('✘ Installation failed', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Remove packages\r\n             */\r\n            private async removePackages(params: types.RemoveParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                try {\r\n                    // Collect packages from both args and dynamicArgs\r\n                    const packages: string[] = [];\r\n\r\n                    if (params.args?.packages) {\r\n                        const parsedPackages = params.args.packages.split(' ').filter((p: string) => p.trim());\r\n                        packages.push(...parsedPackages);\r\n                    }\r\n\r\n                    if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                        packages.push(...params.dynamicArgs);\r\n                    }\r\n\r\n                    if (packages.length === 0) {\r\n                        PromptHelper.showError('Please specify packages to remove');\r\n                        return;\r\n                    }\r\n\r\n                    // Confirm removal\r\n                    const removeAnswers = await PromptHelper.promptRemove(packages);\r\n\r\n                    if (!removeAnswers.confirm) {\r\n                        PromptHelper.showInfo('Removal cancelled');\r\n                        return;\r\n                    }\r\n\r\n                    this.pm!.remove(packages, {\r\n                        global: params.options?.global\r\n                    });\r\n                } catch (error) {\r\n                    PromptHelper.showError('✘ Removal failed', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Update packages\r\n             */\r\n            private async updatePackages(params: types.UpdateParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                try {\r\n                    // Collect packages from both args and dynamicArgs\r\n                    let packages: string[] | undefined = undefined;\r\n\r\n                    if (params.args?.packages) {\r\n                        const parsedPackages = params.args.packages.split(' ').filter((p: string) => p.trim());\r\n                        packages = parsedPackages.length > 0 ? parsedPackages : undefined;\r\n                    }\r\n\r\n                    if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                        if (!packages) packages = [];\r\n                        packages.push(...params.dynamicArgs);\r\n                    }\r\n\r\n                    // If no packages specified, prompt\r\n                    if (!packages || packages.length === 0) {\r\n                        const updateAnswers = await PromptHelper.promptUpdate();\r\n                        packages            = updateAnswers.updateAll ? undefined : updateAnswers.packages;\r\n                    }\r\n\r\n                    this.pm!.update(packages);\r\n                } catch (error) {\r\n                    PromptHelper.showError('✘ Update failed', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Link package globally or link global package to project\r\n             */\r\n            private linkPackage(params?: types.LinkParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                // Collect package names from args and dynamicArgs\r\n                const packages: string[] = [];\r\n\r\n                if (params?.args?.package) {\r\n                    if (typeof params.args.package === 'string') {\r\n                        packages.push(params.args.package);\r\n                    } else if (Array.isArray(params.args.package)) {\r\n                        packages.push(...params.args.package);\r\n                    }\r\n                }\r\n\r\n                if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                    packages.push(...params.dynamicArgs);\r\n                }\r\n\r\n                this.pm!.link(packages.length > 0 ? packages : undefined);\r\n            }\r\n\r\n            /**\r\n             * Unlink package globally or unlink global package from project\r\n             */\r\n            private unlinkPackage(params?: types.LinkParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                // Collect package names from args and dynamicArgs\r\n                const packages: string[] = [];\r\n\r\n                if (params?.args?.package) {\r\n                    if (typeof params.args.package === 'string') {\r\n                        packages.push(params.args.package);\r\n                    } else if (Array.isArray(params.args.package)) {\r\n                        packages.push(...params.args.package);\r\n                    }\r\n                }\r\n\r\n                if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                    packages.push(...params.dynamicArgs);\r\n                }\r\n\r\n                this.pm!.unlink(packages.length > 0 ? packages : undefined);\r\n            }\r\n\r\n            /**\r\n             * List packages\r\n             */\r\n            private listPackages(params: types.ListParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                this.pm!.list({\r\n                    global: params.options?.global ?? false\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Run any script from package.json\r\n             */\r\n            private runScript(params: types.RunScriptParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const scriptName = params?.args?.script;\r\n\r\n                if (!scriptName) {\r\n                    PromptHelper.showError('Please specify a script name');\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    // Collect dynamic args and options\r\n                    const args: string[] = [];\r\n\r\n                    if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                        args.push(...params.dynamicArgs);\r\n                    }\r\n\r\n                    if (params?.dynamicOptions && typeof params.dynamicOptions === 'object') {\r\n                        for (const [key, value] of Object.entries(params.dynamicOptions)) {\r\n                            args.push(`--${key}`);\r\n                            if (value !== true && value !== false) {\r\n                                args.push(String(value));\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // console.log(`🚀 Running script: ${scriptName}${args.length > 0 ? ' ' + args.join(' ') : ''}\\n`);\r\n                    this.pm!.run(scriptName, args.length > 0 ? args : undefined);\r\n                } catch (error) {\r\n                    PromptHelper.showError(`Failed to run script \"${scriptName}\"`, error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n\r\n        // ┌──────────────────────────────── BUILD ──────────────────────────────┐\r\n\r\n            /**\r\n             * Build the current space\r\n             */\r\n            private buildSpace(silently?: boolean) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const loader = new Loader();\r\n                loader.start('Building space...');\r\n\r\n                try {\r\n                    this.pm!.runSilent('build');\r\n                    loader.stop(silently ? '' : '✔ Build succeeded');\r\n                } catch {\r\n                    loader.stopWithError('✘ Build failed');\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            private buildSpaceBool(silently?: boolean) : boolean{\r\n                if (!this.ensureSpace()) return false;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const loader = new Loader();\r\n                loader.start('Building space...');\r\n\r\n                try {\r\n                    this.pm!.runSilent('build');\r\n                    loader.stop(silently ? '' : '✔ Build succeeded');\r\n                    return true;\r\n                } catch {\r\n                    loader.stopWithError('✘ Build failed!');\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Run tests\r\n             */\r\n            private runTests(params?: types.TestParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                // Build args array for bun test\r\n                const args: string[] = [];\r\n\r\n                // Add test path if specified\r\n                const testPath = params?.args?.path;\r\n                if (testPath) {\r\n                    args.push(testPath);\r\n                }\r\n\r\n                // Add coverage flag\r\n                if (params?.options?.coverage) {\r\n                    args.push('--coverage');\r\n                }\r\n\r\n                // Add coverage reporter\r\n                if (params?.options?.['coverage-reporter']) {\r\n                    args.push('--coverage-reporter', params.options['coverage-reporter']);\r\n                }\r\n\r\n                // Add watch flag\r\n                if (params?.options?.watch) {\r\n                    args.push('--watch');\r\n                }\r\n\r\n                // Add bail flag\r\n                if (params?.options?.bail) {\r\n                    args.push('--bail');\r\n                }\r\n\r\n                // Add timeout\r\n                if (params?.options?.timeout) {\r\n                    args.push('--timeout', params.options.timeout);\r\n                }\r\n\r\n                // Add rerun-each\r\n                if (params?.options?.['rerun-each']) {\r\n                    args.push('--rerun-each', params.options['rerun-each']);\r\n                }\r\n\r\n                // Add concurrent\r\n                if (params?.options?.concurrent) {\r\n                    args.push('--concurrent');\r\n                }\r\n\r\n                // Add test name pattern\r\n                if (params?.options?.['test-name-pattern']) {\r\n                    args.push('-t', params.options['test-name-pattern']);\r\n                }\r\n\r\n                // Run tests with args\r\n                if (args.length > 0) {\r\n                    this.pm!.run('test', args);\r\n                } else {\r\n                    this.pm!.run('test');\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Clean build artifacts\r\n             */\r\n            private clean() {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const loader = new Loader();\r\n                loader.start('Cleaning build artifacts...');\r\n\r\n                try {\r\n                    this.pm!.run('clean');\r\n                    loader.stop('✔ Clean complete!');\r\n                } catch {\r\n                    loader.stopWithError('✘ Clean failed!');\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Start the main file - builds silently first, then runs\r\n             */\r\n            private startMain(params?: types.StartParams) {\r\n                if (!this.buildSpaceBool(true)) return;\r\n\r\n                try {\r\n                    // Step 1: Find the built main file\r\n                    const mainFile = this.findBuiltMainFile();\r\n\r\n                    if (!mainFile) {\r\n                        PromptHelper.showError(\r\n                            'Could not find built entry point.\\n' +\r\n                            'Expected to find dist/main.js or dist/index.js after build.'\r\n                        );\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    // Step 2: Collect ALL arguments (dynamic args from CLI)\r\n                    const args: string[] = [];\r\n\r\n                    // Get dynamic args (all unnamed args passed after 'start')\r\n                    if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                        args.push(...params.dynamicArgs);\r\n                    }\r\n\r\n                    // Get dynamic options (all --flags passed)\r\n                    if (params?.dynamicOptions && typeof params.dynamicOptions === 'object') {\r\n                        for (const [key, value] of Object.entries(params.dynamicOptions)) {\r\n                            args.push(`--${key}`);\r\n                            if (value !== true && value !== false) {\r\n                                args.push(String(value));\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // Step 3: Show what we're running\r\n                    if (args.length > 0) {\r\n                        // console.log(`🚀 Running: bun ${mainFile} ${args.join(' ')}\\n`);\r\n                    } else {\r\n                        // console.log(`🚀 Running: bun ${mainFile}\\n`);\r\n                    }\r\n\r\n                    // Step 4: Run the built file with bun\r\n                    const result = spawnSync('bun', [mainFile, ...args], {\r\n                        stdio: 'inherit',\r\n                        cwd: process.cwd()\r\n                    });\r\n\r\n                    if (result.error) {\r\n                        PromptHelper.showError('Failed to start process', result.error as Error);\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    if (result.status !== 0 && result.status !== null) {\r\n                        console.error('\\n✘ Process exited with error');\r\n                        process.exit(result.status);\r\n                    }\r\n                } catch (error) {\r\n                    PromptHelper.showError('Failed to start', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Find the built main entry file (after build)\r\n             */\r\n            private findBuiltMainFile(): string | null {\r\n                const possiblePaths = [\r\n                    'dist/main.js',\r\n                    'dist/index.js',\r\n                    'dist/app.js'\r\n                ];\r\n\r\n                // Try built files first\r\n                for (const filePath of possiblePaths) {\r\n                    if (fs.existsSync(path.join(process.cwd(), filePath))) {\r\n                        return filePath;\r\n                    }\r\n                }\r\n\r\n                // Fallback: Check package.json main field\r\n                try {\r\n                    const packageJsonPath = path.join(process.cwd(), 'package.json');\r\n                    if (fs.existsSync(packageJsonPath)) {\r\n                        const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf-8'));\r\n\r\n                        if (packageJson.main && fs.existsSync(packageJson.main)) {\r\n                            return packageJson.main;\r\n                        }\r\n                    }\r\n                } catch {\r\n                    // Ignore package.json errors\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            /**\r\n             * Publish to npm\r\n             */\r\n            private async publish(params: types.PublishParams) {\r\n                if(!this.buildSpaceBool(true)) return;\r\n                try {\r\n                    const config = this.spaceManager.loadSpaceConfig();\r\n                    if (!config) {\r\n                        PromptHelper.showError('Could not load space configuration');\r\n                        return;\r\n                    }\r\n\r\n                    const fullName = config.repo.org\r\n                        ? `@${config.repo.org}/${config.repo.name}`\r\n                        : config.repo.name;\r\n\r\n                    // Prompt for publish options if not provided\r\n                    let tag     = params.options?.tag     || undefined;\r\n                    let access  = params.options?.access  || undefined;\r\n\r\n                    if (!tag && !access) {\r\n                        const publishAnswers = await PromptHelper.promptPublish(fullName);\r\n\r\n                        if (!publishAnswers.confirm) {\r\n                            PromptHelper.showInfo('Publish cancelled');\r\n                            return;\r\n                        }\r\n\r\n                        tag     = publishAnswers.tag;\r\n                        access  = publishAnswers.access;\r\n                    }\r\n\r\n                    const loader = new Loader();\r\n                    loader.start('Publishing package...');\r\n\r\n                    this.pm!.publish({\r\n                        tag,\r\n                        access: access as types.PublishAccess\r\n                    }, loader);\r\n                } catch (error) {\r\n                    PromptHelper.showError('Publish failed', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/app/mod/spaceManager.ts\r\n//\r\n// Developed with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import * as fs                      from 'fs';\r\n    import * as path                    from 'path';\r\n    import type { SpaceConfig, TemplateVariant } from '../../types.d';\r\n    import { TemplateRegistry }         from './templateRegistry';\r\n    import { JsonFormatter, PACKAGE_JSON_KEY_ORDER, SPACE_FILE_KEY_ORDER } from './jsonFormatter';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    export class SpaceManager {\r\n\r\n        // ┌──────────────────────────────── INIT ──────────────────────────────┐\r\n\r\n            private basePath: string;\r\n\r\n            constructor(basePath: string = process.cwd()) {\r\n                this.basePath = basePath;\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n\r\n        // ┌──────────────────────────────── MAIN ──────────────────────────────┐\r\n\r\n            // Create a new space by cloning from template\r\n            async createSpace(config: SpaceConfig, spacePath?: string): Promise<void> {\r\n                const targetPath = spacePath || path.join(this.basePath, config.repo.name);\r\n\r\n                // Check if space already exists\r\n                if (fs.existsSync(targetPath)) {\r\n                    throw new Error(`Space path \"${targetPath}\" already exists!`);\r\n                }\r\n\r\n                let createdDir = false;\r\n\r\n                try {\r\n                    // Create directory if it doesn't exist\r\n                    if (!fs.existsSync(targetPath)) {\r\n                        fs.mkdirSync(targetPath, { recursive: true });\r\n                        createdDir = true;\r\n                    }\r\n\r\n                    // Clone template from @hmm-repos\r\n                    await this.cloneTemplate(config.type, targetPath, config, config.template);\r\n\r\n                    // Create .space config file\r\n                    this.createSpaceConfig(targetPath, config);\r\n\r\n                } catch (error) {\r\n                    // Cleanup on failure - only if we created the directory\r\n                    if (createdDir && fs.existsSync(targetPath)) {\r\n                        try {\r\n                            // Try to clean up, but don't fail if we can't\r\n                            await this.safeDeleteDirectory(targetPath);\r\n                        } catch {\r\n                            // Ignore cleanup errors\r\n                            console.warn(`Warning: Could not clean up directory at \"${targetPath}\"`);\r\n                        }\r\n                    }\r\n                    throw error;\r\n                }\r\n            }\r\n\r\n            // Load space configuration from .space file\r\n            loadSpaceConfig(spacePath?: string): SpaceConfig | null {\r\n                const targetPath = spacePath || this.basePath;\r\n                const configPath = path.join(targetPath, '.space');\r\n\r\n                if (!fs.existsSync(configPath)) {\r\n                    return null;\r\n                }\r\n\r\n                const content = fs.readFileSync(configPath, 'utf-8');\r\n                return JSON.parse(content);\r\n            }\r\n\r\n            // Check if current directory is a space\r\n            isSpace(dirPath?: string): boolean {\r\n                const targetPath = dirPath || this.basePath;\r\n                return fs.existsSync(path.join(targetPath, '.space'));\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n\r\n        // ┌──────────────────────────────── HELP ──────────────────────────────┐\r\n\r\n            // Clone template from @hmm-repos repository\r\n            private async cloneTemplate(\r\n                type: 'lib' | 'cli' | 'server' | 'app',\r\n                targetPath: string,\r\n                config: SpaceConfig,\r\n                template: TemplateVariant\r\n            ): Promise<void> {\r\n                const repoName = TemplateRegistry.getRepoName(type, template);\r\n                const repoUrl = `https://github.com/hmm-repos/${repoName}.git`;\r\n\r\n                try {\r\n                    const { execSync } = await import('child_process');\r\n\r\n                    // Clone silently (no output to terminal)\r\n                    execSync(\r\n                        `git clone --quiet --depth 1 ${repoUrl} \"${targetPath}\"`,\r\n                        { stdio: 'pipe' }\r\n                    );\r\n\r\n                    // Remove .git directory\r\n                    const gitPath = path.join(targetPath, '.git');\r\n                    if (fs.existsSync(gitPath)) {\r\n                        await this.safeDeleteDirectory(gitPath);\r\n                    }\r\n\r\n                    // Update files with project info\r\n                    await this.updateTemplateFiles(targetPath, config);\r\n\r\n                } catch (e: unknown) {\r\n                    // Check if it's a \"repository not found\" error\r\n                    if(e instanceof Error) {\r\n                        if (e.message && e.message.includes('Repository not found')) {\r\n                            throw new Error(\r\n                                `Template repository not found: ${repoUrl}\\n` +\r\n                                `This template is not yet available. Please mark it as ready: false in templateRegistry.ts`\r\n                            );\r\n                        }\r\n\r\n                        throw new Error(`Failed to clone template from ${repoUrl}: ${e.message || e}`);\r\n                    } else {\r\n                        throw new Error(`Failed to clone template from ${repoUrl}: ${e}`);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Update template files with project-specific information\r\n            private async updateTemplateFiles(\r\n                spacePath: string,\r\n                config: SpaceConfig\r\n            ): Promise<void> {\r\n\r\n                // Generate context-aware URLs and values\r\n                const isOrgProject = config.repo.org && config.repo.org.trim() !== '';\r\n                const hasGithubId = config.author.id && config.author.id.trim() !== '';\r\n\r\n                // Determine the GitHub owner (org or personal account)\r\n                const githubOwner = isOrgProject ? config.repo.org : (hasGithubId ? config.author.id : '');\r\n\r\n                // Generate URLs based on context\r\n                const gitUrl = githubOwner\r\n                    ? `git+https://github.com/${githubOwner}/${config.repo.name}.git`\r\n                    : '';\r\n\r\n                const homepage = githubOwner\r\n                    ? `https://github.com/${githubOwner}/${config.repo.name}#readme`\r\n                    : '';\r\n\r\n                const issuesUrl = githubOwner\r\n                    ? `https://github.com/${githubOwner}/${config.repo.name}/issues`\r\n                    : '';\r\n\r\n                // Prepare full package name (tag)\r\n                const packageTag = isOrgProject\r\n                    ? `@${config.repo.org}/${config.repo.name}`\r\n                    : config.repo.name;\r\n\r\n                // Prepare tag badge - format for shields.io badge\r\n                let tagBadge = '🔥-';\r\n                if (isOrgProject) {\r\n                    tagBadge += `@${(config.repo.org.replace(/-/g, '--') + '/' + config.repo.name.replace(/-/g, '--')).replace(/ /g, '_')}`;\r\n                } else if (config.author.name) {\r\n                    tagBadge += (config.author.name.replace(/-/g, '--') + '/' + config.repo.name.replace(/-/g, '--')).replace(/ /g, '_');\r\n                } else {\r\n                    tagBadge += (config.repo.name.replace(/-/g, '--')).replace(/ /g, '_');\r\n                }\r\n\r\n                // Prepare author URL\r\n                const authorUrl = hasGithubId\r\n                    ? `https://github.com/${config.author.id}`\r\n                    : (config.author.url || '');\r\n\r\n                // ✅ REMOVED: keywordsJson preparation - we'll handle keywords in package.json only\r\n\r\n                // Recursively find all files\r\n                const allFiles = this.getAllFiles(spacePath);\r\n\r\n                for (const filePath of allFiles) {\r\n                    // Skip node_modules and .git\r\n                    if (filePath.includes('node_modules') || filePath.includes('.git')) {\r\n                        continue;\r\n                    }\r\n\r\n                    try {\r\n                        let content = fs.readFileSync(filePath, 'utf-8');\r\n                        // let hasChanges = false;\r\n\r\n                        // STEP 1: Replace template variables in the raw content first\r\n                        if (content.includes('{{')) {\r\n                            // hasChanges = true;\r\n\r\n                            // Replace all placeholders\r\n                            content = content\r\n                                // Package tag (full name with org if exists)\r\n                                .replace(/\\{\\{tag\\}\\}/g,            packageTag)\r\n                                .replace(/\\{\\{tag-badge\\}\\}/g,      tagBadge)\r\n\r\n                                // Repo info\r\n                                .replace(/\\{\\{name\\}\\}/g,           config.repo.name)\r\n                                .replace(/\\{\\{repo\\}\\}/g,           config.repo.name)\r\n                                .replace(/\\{\\{org\\}\\}/g,            config.repo.org || '')\r\n                                .replace(/\\{\\{desc\\}\\}/g,           config.repo.desc || `A ${config.type} space`)\r\n                                .replace(/\\{\\{description\\}\\}/g,    config.repo.desc || `A ${config.type} space`)\r\n                                .replace(/\\{\\{version\\}\\}/g,        config.repo.version)\r\n                                .replace(/\\{\\{license\\}\\}/g,        config.repo.license || 'MIT')\r\n                                // ✅ REMOVED: keyword replacements here - handled in package.json section\r\n                                // .replace(/\\{\\{kw\\}\\}/g,             keywordsJson)\r\n                                // .replace(/\\{\\{keywords\\}\\}/g,       keywordsJson)\r\n\r\n                                // URLs\r\n                                .replace(/\\{\\{url\\}\\}/g,            gitUrl)\r\n                                .replace(/\\{\\{repo_url\\}\\}/g,       gitUrl)\r\n                                .replace(/\\{\\{git_url\\}\\}/g,        gitUrl)\r\n                                .replace(/\\{\\{homepage\\}\\}/g,       homepage)\r\n                                .replace(/\\{\\{issues\\}\\}/g,         issuesUrl)\r\n\r\n                                // Space type, template, and PM\r\n                                .replace(/\\{\\{type\\}\\}/g,           config.type)\r\n                                .replace(/\\{\\{template\\}\\}/g,       config.template || 'clean')\r\n                                .replace(/\\{\\{pm\\}\\}/g,             config.pm)\r\n\r\n                                // Author info\r\n                                .replace(/\\{\\{author\\}\\}/g,         config.author.name || '')\r\n                                .replace(/\\{\\{author_name\\}\\}/g,    config.author.name || '')\r\n                                .replace(/\\{\\{author_id\\}\\}/g,      config.author.id || '')\r\n                                .replace(/\\{\\{author_email\\}\\}/g,   config.author.email || '')\r\n                                .replace(/\\{\\{author_url\\}\\}/g,     authorUrl);\r\n\r\n                            // Write the updated content\r\n                            fs.writeFileSync(filePath, content, 'utf-8');\r\n                        }\r\n\r\n                        // Special handling for package.json FIRST\r\n                        if (filePath.endsWith('package.json')) {\r\n                            // STEP 2: Parse and further update the JSON\r\n                            const packageJson = JSON.parse(content);\r\n\r\n                            // Set full package name (with org if exists)\r\n                            packageJson.name = packageTag;\r\n                            packageJson.version = config.repo.version;\r\n                            packageJson.description = config.repo.desc || `A ${config.type} space`;\r\n                            packageJson.license = config.repo.license || 'MIT';\r\n\r\n                            // ✅ Set keywords as array (this is correct and won't cause double-stringification)\r\n                            if (config.repo.kw && config.repo.kw.length > 0) {\r\n                                packageJson.keywords = config.repo.kw;\r\n                            } else {\r\n                                packageJson.keywords = [];\r\n                            }\r\n\r\n                            // Set homepage\r\n                            if (homepage) {\r\n                                packageJson.homepage = homepage;\r\n                            }\r\n\r\n                            // Set bugs/issues URL\r\n                            if (issuesUrl) {\r\n                                if (!packageJson.bugs) {\r\n                                    packageJson.bugs = {};\r\n                                }\r\n                                packageJson.bugs.url = issuesUrl;\r\n                            }\r\n\r\n                            // Set author\r\n                            if (config.author.name) {\r\n                                if (config.author.email) {\r\n                                    packageJson.author = {\r\n                                        name: config.author.name,\r\n                                        email: config.author.email,\r\n                                        url: authorUrl || undefined\r\n                                    };\r\n                                } else {\r\n                                    packageJson.author = {\r\n                                        name: config.author.name,\r\n                                        url: authorUrl || undefined\r\n                                    };\r\n                                }\r\n                            }\r\n\r\n                            // Set repository URL\r\n                            if (gitUrl) {\r\n                                packageJson.repository = {\r\n                                    type: 'git',\r\n                                    url: gitUrl\r\n                                };\r\n                            }\r\n\r\n                            // Update bin name for CLI projects\r\n                            if (config.type === 'cli' && packageJson.bin) {\r\n                                const oldBinName = Object.keys(packageJson.bin)[0];\r\n                                const binPath = packageJson.bin[oldBinName];\r\n                                delete packageJson.bin[oldBinName];\r\n                                packageJson.bin[config.repo.name] = binPath;\r\n                            }\r\n\r\n                            // Ensure bun engine exists\r\n                            if (!packageJson.engines) {\r\n                                packageJson.engines = {};\r\n                            }\r\n                            if (!packageJson.engines.bun) {\r\n                                packageJson.engines.bun = '>=1.0.0';\r\n                            }\r\n\r\n                            // STEP 3: Format and write package.json\r\n                            content = JsonFormatter.format(packageJson, { keyOrder: PACKAGE_JSON_KEY_ORDER });\r\n                            fs.writeFileSync(filePath, content + '\\n', 'utf-8');\r\n                            continue; // Skip the rest of the loop for package.json\r\n                        }\r\n\r\n                    } catch {\r\n                        // Silently skip files that can't be read/updated (like binaries)\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Recursively get all files in a directory\r\n            private getAllFiles(dirPath: string, arrayOfFiles: string[] = []): string[] {\r\n                const files = fs.readdirSync(dirPath);\r\n\r\n                files.forEach((file) => {\r\n                    const fullPath = path.join(dirPath, file);\r\n\r\n                    if (fs.statSync(fullPath).isDirectory()) {\r\n                        arrayOfFiles = this.getAllFiles(fullPath, arrayOfFiles);\r\n                    } else {\r\n                        arrayOfFiles.push(fullPath);\r\n                    }\r\n                });\r\n\r\n                return arrayOfFiles;\r\n            }\r\n\r\n            // Create .space configuration file\r\n            private createSpaceConfig(spacePath: string, config: SpaceConfig): void {\r\n                const configPath = path.join(spacePath, '.space');\r\n\r\n                // Generate URLs for .space file\r\n                const isOrgProject = config.repo.org && config.repo.org.trim() !== '';\r\n                const hasGithubId = config.author.id && config.author.id.trim() !== '';\r\n                const githubOwner = isOrgProject ? config.repo.org : (hasGithubId ? config.author.id : '');\r\n\r\n                const gitUrl = githubOwner\r\n                    ? `git+https://github.com/${githubOwner}/${config.repo.name}.git`\r\n                    : '';\r\n\r\n                const homepage = githubOwner\r\n                    ? `https://github.com/${githubOwner}/${config.repo.name}#readme`\r\n                    : '';\r\n\r\n                const issuesUrl = githubOwner\r\n                    ? `https://github.com/${githubOwner}/${config.repo.name}/issues`\r\n                    : '';\r\n\r\n                const authorUrl = hasGithubId\r\n                    ? `https://github.com/${config.author.id}`\r\n                    : (config.author.url || '');\r\n\r\n                const configWithDefaults = {\r\n                    type: config.type,\r\n                    template: config.template || 'clean',\r\n                    pm: config.pm,\r\n                    repo: {\r\n                        org: config.repo.org || '',\r\n                        name: config.repo.name,\r\n                        version: config.repo.version,\r\n                        desc: config.repo.desc || `A ${config.type} space`,\r\n                        kw: config.repo.kw || [],\r\n                        license: config.repo.license || 'MIT',\r\n                        issues: issuesUrl,\r\n                        homepage: homepage,\r\n                        git_url: gitUrl\r\n                    },\r\n                    author: {\r\n                        id: config.author.id || '',\r\n                        name: config.author.name || '',\r\n                        email: config.author.email || '',\r\n                        url: authorUrl\r\n                    },\r\n                    createdAt: new Date().toISOString()\r\n                };\r\n\r\n                const configContent = JsonFormatter.format(configWithDefaults, { keyOrder: SPACE_FILE_KEY_ORDER });\r\n\r\n                fs.writeFileSync(configPath, configContent + '\\n', 'utf-8');\r\n            }\r\n\r\n            // Safely delete directory with retry logic\r\n            private async safeDeleteDirectory(dirPath: string, maxRetries: number = 3): Promise<void> {\r\n                for (let i = 0; i < maxRetries; i++) {\r\n                    try {\r\n                        fs.rmSync(dirPath, {\r\n                            recursive: true,\r\n                            force: true,\r\n                            maxRetries: 3,\r\n                            retryDelay: 100\r\n                        });\r\n\r\n                        // Verify deletion\r\n                        if (!fs.existsSync(dirPath)) {\r\n                            return;\r\n                        }\r\n                    } catch (error) {\r\n                        if (i === maxRetries - 1) {\r\n                            throw error;\r\n                        }\r\n                        // Wait before retry\r\n                        await new Promise(resolve => setTimeout(resolve, 300 * (i + 1)));\r\n                    }\r\n                }\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/app/mod/jsonFormatter.ts\r\n//\r\n// Developed with ❤️ by Maysara.\r\n\r\n\r\n// ╔════════════════════════════════════════ TYPE ════════════════════════════════════════╗\r\n\r\n    import * as fs from 'fs';\r\n    import * as path from 'path';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ TYPE ════════════════════════════════════════╗\r\n\r\n    export interface FormatOptions {\r\n        indent?         : string;   // default: '\\t'\r\n        alignColons?    : boolean;  // default: true\r\n        sortKeys?       : boolean;  // default: false\r\n        tabWidth?       : number;   // default: 4 (visual width of a tab character)\r\n        keyOrder?       : string[]; // custom key order (keys not in list appear at end)\r\n    }\r\n\r\n    export const PACKAGE_JSON_KEY_ORDER = [\r\n        'name',\r\n        'version',\r\n        'description',\r\n        'keywords',\r\n        'license',\r\n        'homepage',\r\n        'bugs',\r\n        'author',\r\n        'repository',\r\n        'type',\r\n        'main',\r\n        'types',\r\n        'bin',\r\n        'files',\r\n        'exports',\r\n        'scripts',\r\n        'engines',\r\n        'peerDependencies',\r\n        'dependencies',\r\n        'devDependencies'\r\n    ];\r\n\r\n    export const SPACE_FILE_KEY_ORDER = [\r\n        'type',\r\n        'template',\r\n        'pm',\r\n        'repo',\r\n        'author',\r\n        'createdAt'\r\n    ];\r\n\r\n    // For nested objects in repo\r\n    export const REPO_KEY_ORDER = [\r\n        'org',\r\n        'name',\r\n        'version',\r\n        'desc',\r\n        'kw',\r\n        'license',\r\n        'issues',\r\n        'homepage',\r\n        'git_url'\r\n    ];\r\n\r\n    // For nested objects in author\r\n    export const AUTHOR_KEY_ORDER = [\r\n        'id',\r\n        'name',\r\n        'email',\r\n        'url'\r\n    ];\r\n\r\n    type JsonValue = string | number | boolean | null | JsonObject | JsonArray;\r\n    interface JsonObject {\r\n        [key: string]: JsonValue;\r\n    }\r\n    type JsonArray = JsonValue[];\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    export class JsonFormatter {\r\n\r\n        // ┌──────────────────────────────── MAIN ──────────────────────────────┐\r\n\r\n            // Format JSON with custom alignment and indentation\r\n            static format(obj: JsonValue, options: FormatOptions = {}): string {\r\n                const indent = options.indent || '\\t';\r\n                const alignColons = options.alignColons !== false;\r\n                const sortKeys = options.sortKeys || false;\r\n                const tabWidth = options.tabWidth || 4;\r\n                const keyOrder = options.keyOrder || [];\r\n\r\n                // Calculate GLOBAL max key length across all nesting levels\r\n                const globalMaxKeyLength = alignColons ? this.calculateGlobalMaxKeyLength(obj) : 0;\r\n\r\n                // Calculate max indent depth (in visual characters)\r\n                const maxDepth = this.calculateMaxDepth(obj);\r\n                const maxIndentWidth = maxDepth * (indent === '\\t' ? tabWidth : indent.length);\r\n\r\n                return this.formatValue(obj, 0, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder);\r\n            }\r\n\r\n            // Format and write to file\r\n            static formatFile(filePath: string, options: FormatOptions = {}): void {\r\n                let content = fs.readFileSync(filePath, 'utf-8');\r\n                // Remove BOM if present\r\n                if (content.charCodeAt(0) === 0xFEFF) {\r\n                    content = content.slice(1);\r\n                }\r\n                const obj = JSON.parse(content) as JsonValue;\r\n                const formatted = this.format(obj, options);\r\n                // Write without BOM\r\n                // const utf8NoBom = new TextEncoder();\r\n                fs.writeFileSync(filePath, formatted + '\\n', 'utf-8');\r\n            }\r\n\r\n            // Find all JSON files in directory recursively (excluding node_modules)\r\n            static findJsonFiles(dirPath: string): string[] {\r\n                const jsonFiles: string[] = [];\r\n\r\n                const traverse = (currentPath: string): void => {\r\n                    if (!fs.existsSync(currentPath)) {\r\n                        return;\r\n                    }\r\n\r\n                    const entries = fs.readdirSync(currentPath, { withFileTypes: true });\r\n\r\n                    entries.forEach(entry => {\r\n                        const fullPath = path.join(currentPath, entry.name);\r\n\r\n                        // Skip node_modules\r\n                        if (entry.name === 'node_modules') {\r\n                            return;\r\n                        }\r\n\r\n                        if (entry.isDirectory()) {\r\n                            traverse(fullPath);\r\n                        } else if (entry.isFile() && entry.name.endsWith('.json')) {\r\n                            jsonFiles.push(fullPath);\r\n                        }\r\n                    });\r\n                };\r\n\r\n                traverse(dirPath);\r\n                return jsonFiles;\r\n            }\r\n\r\n            // Format all JSON files in directory and subdirectories\r\n            static formatDirectory(dirPath: string, options: FormatOptions = {}): { success: string[], failed: { file: string, error: string }[] } {\r\n                const results = { success: [] as string[], failed: [] as { file: string, error: string }[] };\r\n                const jsonFiles = this.findJsonFiles(dirPath);\r\n\r\n                jsonFiles.forEach(filePath => {\r\n                    try {\r\n                        this.formatFile(filePath, options);\r\n                        results.success.push(filePath);\r\n                    } catch (error) {\r\n                        results.failed.push({\r\n                            file: filePath,\r\n                            error: error instanceof Error ? error.message : String(error)\r\n                        });\r\n                    }\r\n                });\r\n\r\n                return results;\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n\r\n        // ┌──────────────────────────────── HELP ──────────────────────────────┐\r\n\r\n            // Calculate the maximum nesting depth\r\n            private static calculateMaxDepth(obj: JsonValue, currentDepth: number = 0): number {\r\n                if (!obj || typeof obj !== 'object') {\r\n                    return currentDepth;\r\n                }\r\n\r\n                let maxDepth = currentDepth;\r\n\r\n                if (Array.isArray(obj)) {\r\n                    obj.forEach(item => {\r\n                        const depth = this.calculateMaxDepth(item, currentDepth + 1);\r\n                        if (depth > maxDepth) maxDepth = depth;\r\n                    });\r\n                } else {\r\n                    Object.values(obj).forEach(value => {\r\n                        const depth = this.calculateMaxDepth(value, currentDepth + 1);\r\n                        if (depth > maxDepth) maxDepth = depth;\r\n                    });\r\n                }\r\n\r\n                return maxDepth;\r\n            }\r\n\r\n            // Sort keys based on custom order or alphabetically\r\n            private static sortKeys(keys: string[], keyOrder: string[], sortAlphabetically: boolean): string[] {\r\n                if (keyOrder.length === 0) {\r\n                    return sortAlphabetically ? keys.sort() : keys;\r\n                }\r\n\r\n                // Separate keys into ordered and unordered\r\n                const orderedKeys: string[] = [];\r\n                const unorderedKeys: string[] = [];\r\n\r\n                keys.forEach(key => {\r\n                    if (keyOrder.includes(key)) {\r\n                        orderedKeys.push(key);\r\n                    } else {\r\n                        unorderedKeys.push(key);\r\n                    }\r\n                });\r\n\r\n                // Sort ordered keys by their position in keyOrder\r\n                orderedKeys.sort((a, b) => keyOrder.indexOf(a) - keyOrder.indexOf(b));\r\n\r\n                // Sort unordered keys alphabetically if sortKeys is true\r\n                if (sortAlphabetically) {\r\n                    unorderedKeys.sort();\r\n                }\r\n\r\n                // Return ordered keys first, then unordered\r\n                return [...orderedKeys, ...unorderedKeys];\r\n            }\r\n\r\n            private static calculateGlobalMaxKeyLength(obj: JsonValue): number {\r\n                let maxLength = 0;\r\n\r\n                const traverse = (value: JsonValue): void => {\r\n                    if (!value || typeof value !== 'object') {\r\n                        return;\r\n                    }\r\n\r\n                    if (Array.isArray(value)) {\r\n                        value.forEach(item => traverse(item));\r\n                        return;\r\n                    }\r\n\r\n                    // It's an object\r\n                    const keys = Object.keys(value);\r\n                    keys.forEach(key => {\r\n                        const keyLength = JSON.stringify(key).length;\r\n                        if (keyLength > maxLength) {\r\n                            maxLength = keyLength;\r\n                        }\r\n                        traverse(value[key]);\r\n                    });\r\n                };\r\n\r\n                traverse(obj);\r\n                return maxLength;\r\n            }\r\n\r\n            // Format any JSON value recursively\r\n            private static formatValue(\r\n                value: JsonValue,\r\n                depth: number,\r\n                indent: string,\r\n                alignColons: boolean,\r\n                sortKeys: boolean,\r\n                globalMaxKeyLength: number,\r\n                maxIndentWidth: number,\r\n                tabWidth: number,\r\n                keyOrder: string[]\r\n            ): string {\r\n                if (value === null) return 'null';\r\n                if (value === undefined) return 'undefined';\r\n\r\n                const type = typeof value;\r\n\r\n                if (type === 'string') {\r\n                    return JSON.stringify(value);\r\n                }\r\n\r\n                if (type === 'number' || type === 'boolean') {\r\n                    return String(value);\r\n                }\r\n\r\n                if (Array.isArray(value)) {\r\n                    return this.formatArray(value, depth, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder);\r\n                }\r\n\r\n                if (type === 'object') {\r\n                    return this.formatObject(value as JsonObject, depth, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder);\r\n                }\r\n\r\n                return JSON.stringify(value);\r\n            }\r\n\r\n            // Format an array\r\n            private static formatArray(\r\n                arr: JsonArray,\r\n                depth: number,\r\n                indent: string,\r\n                alignColons: boolean,\r\n                sortKeys: boolean,\r\n                globalMaxKeyLength: number,\r\n                maxIndentWidth: number,\r\n                tabWidth: number,\r\n                keyOrder: string[]\r\n            ): string {\r\n                if (arr.length === 0) return '[]';\r\n\r\n                // Check if array is simple (primitives only)\r\n                const isSimple = arr.every(item =>\r\n                    typeof item === 'string' ||\r\n                    typeof item === 'number' ||\r\n                    typeof item === 'boolean' ||\r\n                    item === null\r\n                );\r\n\r\n                if (isSimple && arr.length <= 3) {\r\n                    // Inline simple short arrays\r\n                    return '[' + arr.map(item => this.formatValue(item, depth, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder)).join(', ') + ']';\r\n                }\r\n\r\n                // Multi-line array\r\n                const currentIndent = indent.repeat(depth + 1);\r\n                const items = arr.map(item =>\r\n                    currentIndent + this.formatValue(item, depth + 1, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder)\r\n                );\r\n\r\n                return '[\\n' + items.join(',\\n') + '\\n' + indent.repeat(depth) + ']';\r\n            }\r\n\r\n            // Format an object with GLOBAL alignment accounting for indentation\r\n            private static formatObject(\r\n                obj: JsonObject,\r\n                depth: number,\r\n                indent: string,\r\n                alignColons: boolean,\r\n                sortKeys: boolean,\r\n                globalMaxKeyLength: number,\r\n                maxIndentWidth: number,\r\n                tabWidth: number,\r\n                keyOrder: string[]\r\n            ): string {\r\n                if (Object.keys(obj).length === 0) return '{}';\r\n\r\n                let keys = Object.keys(obj);\r\n\r\n                // Apply custom ordering\r\n                keys = this.sortKeys(keys, keyOrder, sortKeys);\r\n\r\n                const currentIndent = indent.repeat(depth + 1);\r\n\r\n                // Calculate visual width of current indentation\r\n                const currentIndentWidth = (depth + 1) * (indent === '\\t' ? tabWidth : indent.length);\r\n\r\n                // Format each key-value pair\r\n                const lines = keys.map(key => {\r\n                    const jsonKey = JSON.stringify(key);\r\n                    const value = this.formatValue(obj[key], depth + 1, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder);\r\n\r\n                    // Check if value is a nested object (not array, not null)\r\n                    const isNestedObject = obj[key] !== null && typeof obj[key] === 'object' && !Array.isArray(obj[key]);\r\n\r\n                    if (alignColons && !isNestedObject) {\r\n                        // Padding = (max indent width - current indent width) + (max key length - current key length)\r\n                        const indentDiff = maxIndentWidth - currentIndentWidth;\r\n                        const keyDiff = globalMaxKeyLength - jsonKey.length;\r\n                        const padding = ' '.repeat(indentDiff + keyDiff);\r\n                        return `${currentIndent}${jsonKey}${padding} : ${value}`;\r\n                    } else {\r\n                        return `${currentIndent}${jsonKey}: ${value}`;\r\n                    }\r\n                });\r\n\r\n                return '{\\n' + lines.join(',\\n') + '\\n' + indent.repeat(depth) + '}';\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CLI ════════════════════════════════════════╗\r\n\r\n    // Run from CLI: node my_json_formatter.ts [directory]\r\n    if (require.main === module) {\r\n        let targetDir = process.argv[2] || process.cwd();\r\n\r\n        // Resolve relative paths to absolute\r\n        if (!path.isAbsolute(targetDir)) {\r\n            targetDir = path.resolve(process.cwd(), targetDir);\r\n        }\r\n\r\n        console.log(`🔍 Scanning for JSON files in: ${targetDir}\\n`);\r\n\r\n        const results = JsonFormatter.formatDirectory(targetDir, {\r\n            alignColons: true,\r\n            sortKeys: false\r\n        });\r\n\r\n        if (results.success.length > 0) {\r\n            console.log(`✅ Successfully formatted ${results.success.length} file(s):`);\r\n            results.success.forEach(file => {\r\n                const relative = path.relative(process.cwd(), file);\r\n                console.log(`   - ${relative}`);\r\n            });\r\n        }\r\n\r\n        if (results.failed.length > 0) {\r\n            console.log(`\\n❌ Failed to format ${results.failed.length} file(s):`);\r\n            results.failed.forEach(({ file, error }) => {\r\n                const relative = path.relative(process.cwd(), file);\r\n                console.log(`   - ${relative}: ${error}`);\r\n            });\r\n        }\r\n\r\n        if (results.success.length === 0 && results.failed.length === 0) {\r\n            console.log('📭 No JSON files found.');\r\n        }\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/app/mod/packageManager.ts\r\n//\r\n// Developed with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { JsonFormatter, PACKAGE_JSON_KEY_ORDER }    from './jsonFormatter';\r\n    import { Loader }                                   from './loader';\r\n    import * as path                                    from 'path';\r\n    import * as fs                                      from 'fs';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    export class PackageManagerWrapper {\r\n\r\n        // ┌──────────────────────────────── INIT ──────────────────────────────┐\r\n\r\n            // // Always use bun\r\n            // private readonly pm = 'bun';\r\n\r\n            // Default scripts\r\n            private readonly DEFAULT_SCRIPTS = {\r\n                build: 'tsup',\r\n                test: 'test',\r\n                lint: 'eslint src --ext .ts',\r\n            };\r\n\r\n            constructor() {\r\n                // No need for pm parameter anymore\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n\r\n        // ┌──────────────────────────────── MAIN ──────────────────────────────┐\r\n\r\n            // Install packages\r\n            install(packages?: string[], options?: { dev?: boolean; global?: boolean }): void {\r\n                const args: string[] = [];\r\n\r\n                // Handle global installations differently\r\n                if (options?.global) {\r\n                    args.push('install', '--global');\r\n\r\n                    if (packages && packages.length > 0) {\r\n                        args.push(...packages);\r\n                    } else {\r\n                        console.error('✘ Please specify packages to install globally');\r\n                        process.exit(1);\r\n                    }\r\n                } else {\r\n                    args.push('install');\r\n\r\n                    if (packages && packages.length > 0) {\r\n                        args.push(...packages);\r\n                    }\r\n\r\n                    if (options?.dev) {\r\n                        args.push('--dev');\r\n                    }\r\n                }\r\n\r\n                console.log(`→ Installing${packages ? ` ${packages.join(', ')}` : ' dependencies'}${options?.global ? ' globally' : ''}...`);\r\n                this.execute(args);\r\n\r\n                // Format package.json after install (only for local installs)\r\n                if (!options?.global) {\r\n                    this.format();\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Remove packages\r\n             */\r\n            remove(packages: string[], options?: { global?: boolean }): void {\r\n                const args = ['remove'];\r\n\r\n                if (options?.global) {\r\n                    args.push('--global');\r\n                }\r\n\r\n                args.push(...packages);\r\n\r\n                console.log(`🗑️ Removing ${packages.join(', ')}${options?.global ? ' globally' : ''}...`);\r\n                this.execute(args);\r\n\r\n                // Format package.json after remove (only for local removes)\r\n                if (!options?.global) {\r\n                    this.format();\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Link package(s) globally or link global package(s) to current project\r\n             * - No args: Links current package globally (bun link)\r\n             * - With package name(s): Links global package(s) to current project (bun link <package1> <package2> ...)\r\n             */\r\n            link(packageNames?: string | string[]): void {\r\n                if (packageNames) {\r\n                    const packages = Array.isArray(packageNames) ? packageNames : [packageNames];\r\n                    const packageList = packages.join(', ');\r\n                    console.log(`🔗 Linking global package${packages.length > 1 ? 's' : ''} \"${packageList}\" to current project...`);\r\n                    this.execute(['link', ...packages]);\r\n                } else {\r\n                    console.log('🔗 Linking current package globally...');\r\n                    this.execute(['link']);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Unlink package(s) globally or unlink global package(s) from current project\r\n             * - No args: Unlinks current package globally (bun unlink)\r\n             * - With package name(s): Unlinks global package(s) from current project (bun unlink <package1> <package2> ...)\r\n             */\r\n            unlink(packageNames?: string | string[]): void {\r\n                if (packageNames) {\r\n                    const packages = Array.isArray(packageNames) ? packageNames : [packageNames];\r\n                    const packageList = packages.join(', ');\r\n                    console.log(`🔓 Unlinking global package${packages.length > 1 ? 's' : ''} \"${packageList}\" from current project...`);\r\n                    this.execute(['unlink', ...packages]);\r\n                } else {\r\n                    console.log('🔓 Unlinking current package globally...');\r\n                    this.execute(['unlink']);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Run a script from package.json (with fallback to default)\r\n             */\r\n            run(script: string, args?: string[]): void {\r\n                const scriptCommand = this.getScriptCommand(script);\r\n\r\n                if (!scriptCommand) {\r\n                    console.error(`✘ Script \"${script}\" not found in package.json and no default available`);\r\n                    process.exit(1);\r\n                }\r\n\r\n                // If using default script, run it directly\r\n                if (this.isUsingDefaultScript(script)) {\r\n                    const commandParts = scriptCommand.split(' ');\r\n                    const command = [...commandParts];\r\n\r\n                    if (args && args.length > 0) {\r\n                        command.push(...args);\r\n                    }\r\n\r\n                    this.execute(command);\r\n                } else {\r\n                    // Use bun run for package.json scripts\r\n                    const command = ['run', script];\r\n                    if (args && args.length > 0) {\r\n                        command.push('--', ...args);\r\n                    }\r\n                    this.execute(command);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Run a script from package.json silently (with fallback to default)\r\n             */\r\n            runSilent(script: string, args?: string[]): void {\r\n                const scriptCommand = this.getScriptCommand(script);\r\n\r\n                if (!scriptCommand) {\r\n                    throw new Error(`Script \"${script}\" not found in package.json and no default available`);\r\n                }\r\n\r\n                // If using default script, run it directly\r\n                if (this.isUsingDefaultScript(script)) {\r\n                    const commandParts = scriptCommand.split(' ');\r\n                    const command = [...commandParts];\r\n\r\n                    if (args && args.length > 0) {\r\n                        command.push(...args);\r\n                    }\r\n\r\n                    this.executeSilent(command);\r\n                } else {\r\n                    // Use bun run for package.json scripts\r\n                    const command = ['run', script];\r\n                    if (args && args.length > 0) {\r\n                        command.push('--', ...args);\r\n                    }\r\n                    this.executeSilent(command);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Update packages\r\n             */\r\n            update(packages?: string[]): void {\r\n                console.log(`🔄 Updating${packages ? ` ${packages.join(', ')}` : ' all packages'}...`);\r\n\r\n                const args = ['update'];\r\n                if (packages && packages.length > 0) {\r\n                    args.push(...packages);\r\n                }\r\n                this.execute(args);\r\n\r\n                // Format package.json after update\r\n                this.format();\r\n            }\r\n\r\n            /**\r\n             * List installed packages\r\n             */\r\n            list(options?: { global?: boolean }): void {\r\n                const args = ['pm', 'ls'];\r\n                if (options?.global) {\r\n                    args.push('--global');\r\n                }\r\n                this.execute(args);\r\n            }\r\n\r\n            /**\r\n             * Initialize a new package.json\r\n             */\r\n            init(): void {\r\n                console.log('📝 Initializing package.json...');\r\n                this.execute(['init', '-y']);\r\n\r\n                // Format package.json after init\r\n                this.format();\r\n            }\r\n\r\n            /**\r\n             * Publish package (uses bun for publishing - simpler and more reliable)\r\n             */\r\n            publish(options?: { tag?: string; access?: 'public' | 'restricted' }, loader?: Loader): void {\r\n                // Publish with bun (more reliable than npm)\r\n                const args = ['publish'];\r\n                if (options?.tag) {\r\n                    args.push('--tag', options.tag);\r\n                }\r\n                // Always set access flag for scoped packages, default to public\r\n                const access = options?.access || 'public';\r\n                args.push('--access', access);\r\n\r\n                // Stop loader before running interactive publish process\r\n                if (loader) {\r\n                    loader.stop('');\r\n                }\r\n\r\n                // Use inherit mode to allow interactive authentication\r\n                const publishProc = Bun.spawnSync(['bun', ...args], {\r\n                    stdout: 'inherit',\r\n                    stderr: 'inherit',\r\n                    stdin: 'inherit'\r\n                });\r\n\r\n                if (publishProc.exitCode === 0) {\r\n                    console.log('✔ Published successfully!');\r\n                } else {\r\n                    console.error('✘ Publish failed!');\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Execute bun command\r\n             */\r\n            execute(args: string[]): void {\r\n                const proc = Bun.spawnSync(['bun', ...args], {\r\n                    stdout: 'inherit',\r\n                    stderr: 'inherit'\r\n                });\r\n\r\n                if (proc.exitCode !== 0) {\r\n                    console.error(`✘ Command failed: bun ${args.join(' ')}`);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Execute bun command silently\r\n             */\r\n            executeSilent(args: string[]): void {\r\n                const proc = Bun.spawnSync(['bun', ...args], {\r\n                    stdout: 'pipe',\r\n                    stderr: 'pipe'\r\n                });\r\n\r\n                if (proc.exitCode !== 0) {\r\n                    // Only show errors if command failed\r\n                    const stderr = new TextDecoder().decode(proc.stderr);\r\n                    console.error(`✘ Command failed: bun ${args.join(' ')}`);\r\n                    if (stderr) {\r\n                        console.error(stderr);\r\n                    }\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Get package manager name\r\n             */\r\n            getName(): string {\r\n                return 'bun';\r\n            }\r\n\r\n            /**\r\n             * Get package manager emoji\r\n             */\r\n            getEmoji(): string {\r\n                return '🥟';\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n\r\n        // ┌──────────────────────────────── HELP ──────────────────────────────┐\r\n\r\n            /**\r\n             * Format package.json after operations\r\n             */\r\n            private format(): void {\r\n                try {\r\n                    const pkgPath = path.join(process.cwd(), 'package.json');\r\n                    if (fs.existsSync(pkgPath)) {\r\n                        JsonFormatter.formatFile(pkgPath, { keyOrder: PACKAGE_JSON_KEY_ORDER });\r\n                    }\r\n                } catch {\r\n                    // Silently ignore formatting errors\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Get script command (from package.json or default)\r\n             */\r\n            private getScriptCommand(script: string): string | null {\r\n                const pkgPath = path.join(process.cwd(), 'package.json');\r\n\r\n                // Try to read package.json\r\n                if (fs.existsSync(pkgPath)) {\r\n                    try {\r\n                        const pkg = JSON.parse(fs.readFileSync(pkgPath, 'utf-8'));\r\n\r\n                        // Check if script exists in package.json\r\n                        if (pkg.scripts && pkg.scripts[script]) {\r\n                            return pkg.scripts[script];\r\n                        }\r\n                    } catch {\r\n                        // If can't read package.json, fall through to defaults\r\n                    }\r\n                }\r\n\r\n                // Return default script if available\r\n                if (script in this.DEFAULT_SCRIPTS) {\r\n                    return this.DEFAULT_SCRIPTS[script as keyof typeof this.DEFAULT_SCRIPTS];\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            /**\r\n             * Check if using default script (not from package.json)\r\n             */\r\n            private isUsingDefaultScript(script: string): boolean {\r\n                const pkgPath = path.join(process.cwd(), 'package.json');\r\n\r\n                if (fs.existsSync(pkgPath)) {\r\n                    try {\r\n                        const pkg = JSON.parse(fs.readFileSync(pkgPath, 'utf-8'));\r\n\r\n                        // If script exists in package.json, not using default\r\n                        if (pkg.scripts && pkg.scripts[script]) {\r\n                            return false;\r\n                        }\r\n                    } catch {\r\n                        // If can't read, assume using default\r\n                    }\r\n                }\r\n\r\n                // Using default if script is in DEFAULT_SCRIPTS\r\n                return script in this.DEFAULT_SCRIPTS;\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/app/mod/promptHelper.ts\r\n//\r\n// Developed with ❤️ by Maysara.\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\r\n\r\n    import { input, select, confirm }   from '@inquirer/prompts';\r\n    import { TemplateRegistry }         from './templateRegistry';\r\n    import type { SpaceType }           from '../../types.d';\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ TYPE ════════════════════════════════════════╗\r\n\r\n    export interface InitPromptAnswers {\r\n        name            : string;\r\n        type            : 'lib' | 'cli' | 'server';\r\n        template        : string;\r\n        description     : string;\r\n        packageManager  : 'bun' | 'npm';\r\n        author          : string;\r\n        authorEmail     : string;\r\n        githubId        : string;\r\n        keywords        : string[];\r\n        license         : string;\r\n    }\r\n\r\n    export interface PublishPromptAnswers {\r\n        confirm         : boolean;\r\n        tag?            : string;\r\n        access?         : 'public' | 'restricted';\r\n    }\r\n\r\n    export interface RemovePromptAnswers {\r\n        packages        : string[];\r\n        confirm         : boolean;\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\r\n\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    export class PromptHelper {\r\n\r\n        // ┌──────────────────────────────── MAIN ──────────────────────────────┐\r\n\r\n            /**\r\n             * Prompt for init command parameters\r\n             */\r\n            static async promptInit(params: {\r\n                name?       : string;\r\n                org?        : string;\r\n                type?       : string;\r\n                template?   : string;\r\n                desc?       : string;\r\n            }): Promise<InitPromptAnswers> {\r\n\r\n                let name                = params.name;\r\n                let type                = params.type;\r\n                let template            = params.template;\r\n                let description         = params.desc;\r\n                let author              = '';\r\n\r\n                // Name (supports @org/name format)\r\n                if (!name || name === 'my-space') {\r\n                    name = await input({\r\n                        message: 'name:',\r\n                        default: 'my-space',\r\n                        validate: (value: string) => {\r\n                            if (!value || value.trim() === '') {\r\n                                return 'Space name is required';\r\n                            }\r\n                            // Check for @org/name format\r\n                            const orgRegex = /^@([a-z0-9-_]+)\\/([a-z0-9-_]+)$/;\r\n                            const simpleRegex = /^[a-z0-9-_]+$/;\r\n\r\n                            if (!orgRegex.test(value) && !simpleRegex.test(value)) {\r\n                                return 'Name must be either \"package-name\" or \"@org/package-name\" (lowercase, numbers, hyphens, underscores only)';\r\n                            }\r\n                            return true;\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // Type\r\n                if (!type) {\r\n                    // Check which space types have ready templates\r\n                    const libReady = TemplateRegistry.getTemplatesForType('lib', false).length > 0;\r\n                    const cliReady = TemplateRegistry.getTemplatesForType('cli', false).length > 0;\r\n                    const serverReady = TemplateRegistry.getTemplatesForType('server', false).length > 0;\r\n                    const webReady = TemplateRegistry.getTemplatesForType('app', false).length > 0;\r\n\r\n                    type = await select({\r\n                        message: 'type:',\r\n                        choices: [\r\n                            {\r\n                                name: `→ Library    - TypeScript library for npm${!libReady ? ' (Coming Soon)' : ''}`,\r\n                                value: 'lib',\r\n                                disabled: !libReady ? 'No templates ready yet' : false\r\n                            },\r\n                            {\r\n                                name: `→ CLI        - Command-line tool${!cliReady ? ' (Coming Soon)' : ''}`,\r\n                                value: 'cli',\r\n                                disabled: !cliReady ? 'No templates ready yet' : false\r\n                            },\r\n                            {\r\n                                name: `→ Server     - Backend server application${!serverReady ? ' (Coming Soon)' : ''}`,\r\n                                value: 'server',\r\n                                disabled: !serverReady ? 'No templates ready yet' : false\r\n                            },\r\n                            {\r\n                                name: `→ Web App    - Full-stack web application${!webReady ? ' (Coming Soon)' : ''}`,\r\n                                value: 'web',\r\n                                disabled: !webReady ? 'No templates ready yet' : false\r\n                            }\r\n                        ]\r\n                    });\r\n                }\r\n\r\n                // Template Variant (based on type) - show all templates with status\r\n                if (!template) {\r\n                    const allTemplates = TemplateRegistry.getTemplatesForType(type as SpaceType, true);\r\n                    const readyTemplates = allTemplates.filter(t => t.ready);\r\n\r\n                    // Check if there are any ready templates\r\n                    if (readyTemplates.length === 0) {\r\n                        throw new Error(`No templates are ready yet for \"${type}\" spaces. This space type is coming soon!`);\r\n                    }\r\n\r\n                    const templateChoices = allTemplates.map(t => {\r\n                        const statusEmoji = t.ready ? '✔' : '🚧';\r\n                        const statusText = t.ready ? '' : ' (Coming Soon)';\r\n                        return {\r\n                            name: `${statusEmoji} ${t.label}${statusText} - ${t.description}`,\r\n                            value: t.name,\r\n                            short: t.label,\r\n                            disabled: !t.ready ? 'Not ready yet' : false\r\n                        };\r\n                    });\r\n\r\n                    template = await select({\r\n                        message: 'template:',\r\n                        choices: templateChoices,\r\n                        default: TemplateRegistry.getDefaultTemplate(type as SpaceType)\r\n                    });\r\n                }\r\n\r\n                // Description\r\n                if (!description) {\r\n                    const defaultDesc = type === 'lib'\r\n                        ? `A TypeScript library`\r\n                        : type === 'cli'\r\n                            ? `A command-line tool`\r\n                            : `A backend server`;\r\n\r\n                    description = await input({\r\n                        message: 'desc:',\r\n                        default: defaultDesc\r\n                    });\r\n                }\r\n\r\n                // Package Manager - Always use bun (removed from prompt)\r\n                const packageManager = 'bun';\r\n\r\n                // Author name\r\n                author = await input({\r\n                    message: 'author name:',\r\n                    default: ''\r\n                });\r\n\r\n                // Author email\r\n                const authorEmail = await input({\r\n                    message: 'author email:',\r\n                    default: '',\r\n                    validate: (value: string) => {\r\n                        if (value && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)) {\r\n                            return 'Please enter a valid email address or leave empty';\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                // GitHub username\r\n                const githubId = await input({\r\n                    message: 'github username:',\r\n                    default: '',\r\n                    validate: (value: string) => {\r\n                        if (value && !/^[a-z0-9]([a-z0-9-]*[a-z0-9])?$/i.test(value)) {\r\n                            return 'Please enter a valid GitHub username or leave empty';\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                // Keywords\r\n                const keywordsInput = await input({\r\n                    message: 'keywords (comma-separated):',\r\n                    default: '',\r\n                });\r\n\r\n                const keywords = keywordsInput\r\n                    ? keywordsInput.split(',').map(k => k.trim()).filter(k => k)\r\n                    : [];\r\n\r\n                // License\r\n                const license = await input({\r\n                    message: 'license:',\r\n                    default: 'MIT'\r\n                });\r\n\r\n                return {\r\n                    name,\r\n                    type: type as 'lib' | 'cli' | 'server',\r\n                    template,\r\n                    description,\r\n                    packageManager: packageManager as 'bun' | 'npm',\r\n                    author,\r\n                    authorEmail,\r\n                    githubId,\r\n                    keywords,\r\n                    license\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Prompt for publish confirmation and options\r\n             */\r\n            static async promptPublish(spaceName: string): Promise<PublishPromptAnswers> {\r\n                const shouldPublish = await confirm({\r\n                    message: `Are you sure you want to publish \"${spaceName}\" to npm?`,\r\n                    default: false\r\n                });\r\n\r\n                if (!shouldPublish) {\r\n                    return {\r\n                        confirm: false\r\n                    };\r\n                }\r\n\r\n                const tag = await input({\r\n                    message: 'Publish with a tag (e.g., beta, next) or leave empty for latest:',\r\n                    default: ''\r\n                });\r\n\r\n                const access = await select({\r\n                    message: '🔐 Access level:',\r\n                    choices: [\r\n                        { name: 'Public - Anyone can install', value: 'public' },\r\n                        { name: 'Restricted - Requires authentication', value: 'restricted' }\r\n                    ],\r\n                    default: 'public'\r\n                });\r\n\r\n                return {\r\n                    confirm: true,\r\n                    tag: tag || undefined,\r\n                    access: access as 'public' | 'restricted'\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Prompt for package removal confirmation\r\n             */\r\n            static async promptRemove(packages: string[]): Promise<RemovePromptAnswers> {\r\n                const shouldRemove = await confirm({\r\n                    message: `Remove ${packages.join(', ')}?`,\r\n                    default: true\r\n                });\r\n\r\n                return {\r\n                    packages,\r\n                    confirm: shouldRemove\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Simple confirmation prompt helper\r\n             */\r\n            static async promptConfirm(message: string, defaultValue: boolean = false): Promise<boolean> {\r\n                const readline = await import('readline');\r\n                const rl = readline.createInterface({\r\n                    input   : process.stdin,\r\n                    output  : process.stdout\r\n                });\r\n\r\n                const defaultText = defaultValue ? ' (Y/n)' : ' (y/N)';\r\n\r\n                return new Promise((resolve) => {\r\n                    rl.question(`${message}${defaultText} `, (answer: string) => {\r\n                        rl.close();\r\n\r\n                        if (answer.trim() === '') {\r\n                            resolve(defaultValue);\r\n                        } else {\r\n                            resolve(answer.trim().toLowerCase() === 'y' || answer.trim().toLowerCase() === 'yes');\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Prompt for package installation\r\n             */\r\n            static async promptInstall(currentPackages?: string): Promise<{\r\n                packages: string[];\r\n                isDev: boolean;\r\n            }> {\r\n                const packagesInput = await input({\r\n                    message: 'Enter package names (space-separated):',\r\n                    default: currentPackages || '',\r\n                    validate: (value: string) => {\r\n                        if (!value || value.trim() === '') {\r\n                            return 'Please enter at least one package name';\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                const isDev = await confirm({\r\n                    message: '🛠️  Install as dev dependency?',\r\n                    default: false\r\n                });\r\n\r\n                return {\r\n                    packages: packagesInput.split(' ').filter((p: string) => p.trim()),\r\n                    isDev\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Prompt for package update selection\r\n             */\r\n            static async promptUpdate(): Promise<{ updateAll: boolean; packages?: string[] }> {\r\n                const updateType = await select({\r\n                    message: 'What do you want to update?',\r\n                    choices: [\r\n                        { name: 'All packages', value: 'all' },\r\n                        { name: 'Specific packages', value: 'specific' }\r\n                    ]\r\n                });\r\n\r\n                if (updateType === 'all') {\r\n                    return {\r\n                        updateAll: true\r\n                    };\r\n                }\r\n\r\n                const packagesInput = await input({\r\n                    message: '📦 Enter package names (space-separated):',\r\n                    validate: (value: string) => {\r\n                        if (!value || value.trim() === '') {\r\n                            return 'Please enter at least one package name';\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                return {\r\n                    updateAll: false,\r\n                    packages: packagesInput.split(' ').filter((p: string) => p.trim())\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Prompt user if they want to use current directory\r\n             */\r\n            static async promptUseCurrentDir(dirName: string): Promise<boolean> {\r\n                const shouldUse = await confirm({\r\n                    message: `Use current directory \"${dirName}\" as the space root?`,\r\n                    default: true\r\n                });\r\n\r\n                return shouldUse;\r\n            }\r\n\r\n            /**\r\n             * Prompt user if they want to delete existing directory\r\n             */\r\n            static async promptDeleteExistingDir(dirPath: string): Promise<boolean> {\r\n                const shouldDelete = await confirm({\r\n                    message: `⚠️  Directory already exists at \"${dirPath}\". Delete and recreate?`,\r\n                    default: false\r\n                });\r\n\r\n                return shouldDelete;\r\n            }\r\n\r\n            /**\r\n             * Show a success message with next steps\r\n             */\r\n            static showSuccess(spaceName: string, nextSteps: string[]) {\r\n                console.log('');\r\n                nextSteps.forEach((step) => {\r\n                    console.log(`→ ${step}`);\r\n                });\r\n                console.log('');\r\n            }\r\n\r\n            /**\r\n             * Show an error message\r\n             */\r\n            static showError(message: string, error?: Error) {\r\n                console.log('\\n✘ Error:', message);\r\n                if (error && error.message) {\r\n                    console.log(`   ${error.message}`);\r\n                }\r\n                console.log('');\r\n            }\r\n\r\n            /**\r\n             * Show a warning message\r\n             */\r\n            static showWarning(message: string) {\r\n                console.log('\\n⚠️  Warning:', message);\r\n                console.log('');\r\n            }\r\n\r\n            /**\r\n             * Show an info message\r\n             */\r\n            static showInfo(message: string) {\r\n                console.log('\\nℹ️  ', message);\r\n                console.log('');\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/app/mod/loader.ts\r\n//\r\n// Developed with ❤️ by Maysara.\r\n\r\n\r\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\r\n\r\n    export class Loader {\r\n\r\n        // ┌──────────────────────────────── INIT ──────────────────────────────┐\r\n\r\n            private frames: string[] = ['⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏'];\r\n            private currentFrame: number = 0;\r\n            private interval: NodeJS.Timeout | null = null;\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n\r\n        // ┌──────────────────────────────── MAIN ──────────────────────────────┐\r\n\r\n            start(message: string): void {\r\n                process.stdout.write(`\\n${message}`);\r\n                this.interval = setInterval(() => {\r\n                    process.stdout.write(`\\r${this.frames[this.currentFrame]} ${message}`);\r\n                    this.currentFrame = (this.currentFrame + 1) % this.frames.length;\r\n                }, 80);\r\n            }\r\n\r\n            stop(successMessage: string): void {\r\n                if (this.interval) {\r\n                    clearInterval(this.interval);\r\n                    this.interval = null;\r\n                }\r\n\r\n                if (successMessage === '') {\r\n                    // Clear the current line and move cursor up to remove the loader completely\r\n                    process.stdout.write('\\r\\x1b[K\\x1b[1A\\x1b[K');\r\n                } else {\r\n                    process.stdout.write(`\\r${successMessage}                          \\n\\n`);\r\n                }\r\n            }\r\n\r\n            stopWithError(errorMessage: string): void {\r\n                if (this.interval) {\r\n                    clearInterval(this.interval);\r\n                    this.interval = null;\r\n                }\r\n                process.stdout.write(`\\r✘ ${errorMessage}                          \\n\\n`);\r\n            }\r\n\r\n        // └────────────────────────────────────────────────────────────────────┘\r\n\r\n    }\r\n\r\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/main.ts\n//\n// Made with ❤️ by Maysara.\n\n\n\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\n\n    import { App } from './app';\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n\n\n\n// ╔════════════════════════════════════════ INIT ════════════════════════════════════════╗\n\n    const app = App.create({\n        name        : 'Space',\n        version     : '0.0.2',\n        desc        : 'Build flexible spaces for any platform',\n    });\n\n    app.run();\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝"]}