{"version":3,"sources":["../src/app/mod/templateRegistry.ts","../src/app/mod/spaceManager.ts","../src/app/mod/jsonFormatter.ts","../src/app/mod/packageManager.ts","../src/app/mod/promptHelper.ts","../src/app/mod/loader.ts","../src/app/index.ts","../src/index.ts"],"names":["templateRegistry_exports","__export","TemplateRegistry","init_templateRegistry","__esmMin","type","includeUnready","templates","t","defaultTemplate","template","typeConfig","PACKAGE_JSON_KEY_ORDER","SPACE_FILE_KEY_ORDER","JsonFormatter","obj","options","indent","alignColons","sortKeys","tabWidth","keyOrder","globalMaxKeyLength","maxIndentWidth","filePath","content","P","formatted","dirPath","jsonFiles","traverse","currentPath","entry","fullPath","E","results","error","currentDepth","maxDepth","item","depth","value","keys","sortAlphabetically","orderedKeys","unorderedKeys","key","a","b","maxLength","keyLength","arr","currentIndent","currentIndentWidth","jsonKey","isNestedObject","indentDiff","keyDiff","padding","__require","targetDir","SpaceManager","basePath","config","spacePath","targetPath","createdDir","configPath","repoUrl","execSync","gitPath","e","isOrgProject","hasGithubId","githubOwner","gitUrl","homepage","issuesUrl","packageTag","tagBadge","authorUrl","allFiles","packageJson","oldBinName","binPath","arrayOfFiles","file","configWithDefaults","configContent","maxRetries","i","resolve","PackageManagerWrapper","packages","args","packageNames","packageList","script","scriptCommand","command","loader","access","proc","stderr","pkgPath","I","T","pkg","PromptHelper","params","name","description","author","input","orgRegex","simpleRegex","libReady","cliReady","serverReady","webReady","select","allTemplates","templateChoices","statusEmoji","statusText","packageManager","authorEmail","githubId","keywordsInput","keywords","k","license","spaceName","confirm","tag","shouldRemove","message","defaultValue","rl","defaultText","answer","currentPackages","packagesInput","isDev","p","dirName","nextSteps","step","Loader","successMessage","errorMessage","App","_App","cli","fullName","match","w","answers","org","currentDirName","$","kwString","parsedPackages","installAnswers","updateAnswers","scriptName","silently","testPath","mainFile","result","spawnSync","possiblePaths","packageJsonPath","publishAnswers","app"],"mappings":"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","file":"index.js","sourcesContent":["// src/app/mod/templateRegistry.ts\r\n//\r\n// Developed with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import type { SpaceType, SpaceTypeConfig, TemplateVariant } from '../../types';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class TemplateRegistry {\r\n\r\n        //  INIT \r\n\r\n            private static readonly TEMPLATES: Record<SpaceType, SpaceTypeConfig> = {\r\n                lib: {\r\n                    type: 'lib',\r\n                    defaultTemplate: 'clean',\r\n                    templates: [\r\n                        {\r\n                            name: 'clean',\r\n                            label: 'Clean Library',\r\n                            description: 'Zero dependencies - just TypeScript and build tools',\r\n                            repo: 'lib',\r\n                            requiresSetup: false,\r\n                            ready: true\r\n                        }\r\n                    ]\r\n                },\r\n\r\n                server: {\r\n                    type                    : 'server',\r\n                    defaultTemplate         : 'clean',\r\n                    templates               : [\r\n                        {\r\n                            name            : 'clean',\r\n                            label           : 'Clean Server',\r\n                            description     : 'Comes with @minejs/server library for quick server development',\r\n                            repo            : 'server',\r\n                            deps            : ['@minejs/server'],\r\n                            requiresSetup   : true,\r\n                            ready           : true\r\n                        },\r\n                    ]\r\n                },\r\n\r\n                cli: {\r\n                    type: 'cli',\r\n                    defaultTemplate: 'clean',\r\n                    templates: [\r\n                        {\r\n                            name: 'clean',\r\n                            label: 'Clean CLI',\r\n                            description: 'Comes with @minejs/cli library for quick CLI development',\r\n                            repo: 'cli',\r\n                            deps: ['@minejs/cli'],\r\n                            requiresSetup: true,\r\n                            ready: true\r\n                        }\r\n                    ]\r\n                },\r\n\r\n                app: {\r\n                    type: 'app',\r\n                    defaultTemplate: 'clean',\r\n                    templates: [\r\n                        {\r\n                            name: 'clean',\r\n                            label: 'Clean Web App',\r\n                            description: 'Comes with @cruxjs framework for quick web development',\r\n                            repo: 'app',\r\n                            deps: ['@cruxjs/app'],\r\n                            requiresSetup: true,\r\n                            ready: true\r\n                        },\r\n                    ]\r\n                },\r\n            };\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            /**\r\n             * Get all templates for a space type\r\n             */\r\n            static getTemplatesForType(type: SpaceType, includeUnready: boolean = false): SpaceTypeConfig['templates'] {\r\n                const templates = this.TEMPLATES[type]?.templates || [];\r\n                return includeUnready ? templates : templates.filter(t => t.ready);\r\n            }\r\n\r\n            /**\r\n             * Get only ready templates for a space type\r\n             */\r\n            static getReadyTemplatesForType(type: SpaceType): SpaceTypeConfig['templates'] {\r\n                return this.getTemplatesForType(type, false);\r\n            }\r\n\r\n            /**\r\n             * Get default template for a space type\r\n             */\r\n            static getDefaultTemplate(type: SpaceType): TemplateVariant {\r\n                const templates = this.TEMPLATES[type];\r\n                if (!templates) return 'clean';\r\n\r\n                // Try to find a ready template that matches the default\r\n                const defaultTemplate = templates.templates.find(\r\n                    t => t.name === templates.defaultTemplate && t.ready\r\n                );\r\n\r\n                if (defaultTemplate) {\r\n                    return defaultTemplate.name;\r\n                }\r\n\r\n                // Fallback to first ready template\r\n                const firstReady = templates.templates.find(t => t.ready);\r\n                return firstReady?.name || templates.defaultTemplate;\r\n            }\r\n\r\n            /**\r\n             * Get template configuration\r\n             */\r\n            static getTemplate(type: SpaceType, template: TemplateVariant) {\r\n                const typeConfig = this.TEMPLATES[type];\r\n                if (!typeConfig) return null;\r\n\r\n                return typeConfig.templates.find(t => t.name === template);\r\n            }\r\n\r\n            /**\r\n             * Check if template is ready for use\r\n             */\r\n            static isTemplateReady(type: SpaceType, template: TemplateVariant): boolean {\r\n                const config = this.getTemplate(type, template);\r\n                return config?.ready || false;\r\n            }\r\n\r\n            /**\r\n             * Validate template variant for a space type\r\n             */\r\n            static isValidTemplate(type: SpaceType, template: TemplateVariant): boolean {\r\n                const templates = this.getTemplatesForType(type);\r\n                return templates.some(t => t.name === template);\r\n            }\r\n\r\n            /**\r\n             * Get repository name for a template\r\n             */\r\n            static getRepoName(type: SpaceType, template: TemplateVariant): string {\r\n                const config = this.getTemplate(type, template);\r\n                return config?.repo || 'ready-lib';\r\n            }\r\n\r\n            /**\r\n             * Get all space types\r\n             */\r\n            static getSpaceTypes(): SpaceType[] {\r\n                return Object.keys(this.TEMPLATES) as SpaceType[];\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/app/mod/spaceManager.ts\r\n//\r\n// Developed with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import * as fs                      from 'fs';\r\n    import * as path                    from 'path';\r\n    import type { SpaceConfig, TemplateVariant } from '../../types';\r\n    import { TemplateRegistry }         from './templateRegistry';\r\n    import { JsonFormatter, PACKAGE_JSON_KEY_ORDER, SPACE_FILE_KEY_ORDER } from './jsonFormatter';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class SpaceManager {\r\n\r\n        //  INIT \r\n\r\n            private basePath: string;\r\n\r\n            constructor(basePath: string = process.cwd()) {\r\n                this.basePath = basePath;\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            // Create a new space by cloning from template\r\n            async createSpace(config: SpaceConfig, spacePath?: string): Promise<void> {\r\n                const targetPath = spacePath || path.join(this.basePath, config.repo.name);\r\n\r\n                // Check if space already exists\r\n                if (fs.existsSync(targetPath)) {\r\n                    throw new Error(`Space path \"${targetPath}\" already exists!`);\r\n                }\r\n\r\n                let createdDir = false;\r\n\r\n                try {\r\n                    // Create directory if it doesn't exist\r\n                    if (!fs.existsSync(targetPath)) {\r\n                        fs.mkdirSync(targetPath, { recursive: true });\r\n                        createdDir = true;\r\n                    }\r\n\r\n                    // Clone template from @hmm-repos\r\n                    await this.cloneTemplate(config.type, targetPath, config, config.template);\r\n\r\n                    // Create .hmm config file\r\n                    this.createSpaceConfig(targetPath, config);\r\n\r\n                } catch (error) {\r\n                    // Cleanup on failure - only if we created the directory\r\n                    if (createdDir && fs.existsSync(targetPath)) {\r\n                        try {\r\n                            // Try to clean up, but don't fail if we can't\r\n                            await this.safeDeleteDirectory(targetPath);\r\n                        } catch {\r\n                            // Ignore cleanup errors\r\n                            console.warn(`Warning: Could not clean up directory at \"${targetPath}\"`);\r\n                        }\r\n                    }\r\n                    throw error;\r\n                }\r\n            }\r\n\r\n            // Load space configuration from .hmm file\r\n            loadSpaceConfig(spacePath?: string): SpaceConfig | null {\r\n                const targetPath = spacePath || this.basePath;\r\n                const configPath = path.join(targetPath, '.hmm');\r\n\r\n                if (!fs.existsSync(configPath)) {\r\n                    return null;\r\n                }\r\n\r\n                const content = fs.readFileSync(configPath, 'utf-8');\r\n                return JSON.parse(content);\r\n            }\r\n\r\n            // Check if current directory is a space\r\n            isSpace(dirPath?: string): boolean {\r\n                const targetPath = dirPath || this.basePath;\r\n                return fs.existsSync(path.join(targetPath, '.hmm'));\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            // Clone template from @hmm-repos repository\r\n            private async cloneTemplate(\r\n                type: 'lib' | 'cli' | 'server' | 'app',\r\n                targetPath: string,\r\n                config: SpaceConfig,\r\n                template: TemplateVariant\r\n            ): Promise<void> {\r\n                const repoName = TemplateRegistry.getRepoName(type, template);\r\n                const repoUrl = `https://github.com/hmm-repos/${repoName}.git`;\r\n\r\n                try {\r\n                    const { execSync } = await import('child_process');\r\n\r\n                    // Clone silently (no output to terminal)\r\n                    execSync(\r\n                        `git clone --quiet --depth 1 ${repoUrl} \"${targetPath}\"`,\r\n                        { stdio: 'pipe' }\r\n                    );\r\n\r\n                    // Remove .git directory\r\n                    const gitPath = path.join(targetPath, '.git');\r\n                    if (fs.existsSync(gitPath)) {\r\n                        await this.safeDeleteDirectory(gitPath);\r\n                    }\r\n\r\n                    // Update files with project info\r\n                    await this.updateTemplateFiles(targetPath, config);\r\n\r\n                } catch (e: unknown) {\r\n                    // Check if it's a \"repository not found\" error\r\n                    if(e instanceof Error) {\r\n                        if (e.message && e.message.includes('Repository not found')) {\r\n                            throw new Error(\r\n                                `Template repository not found: ${repoUrl}\\n` +\r\n                                `This template is not yet available. Please mark it as ready: false in templateRegistry.ts`\r\n                            );\r\n                        }\r\n\r\n                        throw new Error(`Failed to clone template from ${repoUrl}: ${e.message || e}`);\r\n                    } else {\r\n                        throw new Error(`Failed to clone template from ${repoUrl}: ${e}`);\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Update template files with project-specific information\r\n            private async updateTemplateFiles(\r\n                spacePath: string,\r\n                config: SpaceConfig\r\n            ): Promise<void> {\r\n\r\n                // Generate context-aware URLs and values\r\n                const isOrgProject = config.repo.org && config.repo.org.trim() !== '';\r\n                const hasGithubId = config.author.id && config.author.id.trim() !== '';\r\n\r\n                // Determine the GitHub owner (org or personal account)\r\n                const githubOwner = isOrgProject ? config.repo.org : (hasGithubId ? config.author.id : '');\r\n\r\n                // Generate URLs based on context\r\n                const gitUrl = githubOwner\r\n                    ? `git+https://github.com/${githubOwner}/${config.repo.name}.git`\r\n                    : '';\r\n\r\n                const homepage = githubOwner\r\n                    ? `https://github.com/${githubOwner}/${config.repo.name}#readme`\r\n                    : '';\r\n\r\n                const issuesUrl = githubOwner\r\n                    ? `https://github.com/${githubOwner}/${config.repo.name}/issues`\r\n                    : '';\r\n\r\n                // Prepare full package name (tag)\r\n                const packageTag = isOrgProject\r\n                    ? `@${config.repo.org}/${config.repo.name}`\r\n                    : config.repo.name;\r\n\r\n                // Prepare tag badge - format for shields.io badge\r\n                let tagBadge = '-';\r\n                if (isOrgProject) {\r\n                    tagBadge += `@${(config.repo.org.replace(/-/g, '--') + '/' + config.repo.name.replace(/-/g, '--')).replace(/ /g, '_')}`;\r\n                } else if (config.author.name) {\r\n                    tagBadge += (config.author.name.replace(/-/g, '--') + '/' + config.repo.name.replace(/-/g, '--')).replace(/ /g, '_');\r\n                } else {\r\n                    tagBadge += (config.repo.name.replace(/-/g, '--')).replace(/ /g, '_');\r\n                }\r\n\r\n                // Prepare author URL\r\n                const authorUrl = hasGithubId\r\n                    ? `https://github.com/${config.author.id}`\r\n                    : (config.author.url || '');\r\n\r\n                //  REMOVED: keywordsJson preparation - we'll handle keywords in package.json only\r\n\r\n                // Recursively find all files\r\n                const allFiles = this.getAllFiles(spacePath);\r\n\r\n                for (const filePath of allFiles) {\r\n                    // Skip node_modules and .git\r\n                    if (filePath.includes('node_modules') || filePath.includes('.git')) {\r\n                        continue;\r\n                    }\r\n\r\n                    try {\r\n                        let content = fs.readFileSync(filePath, 'utf-8');\r\n                        // let hasChanges = false;\r\n\r\n                        // STEP 1: Replace template variables in the raw content first\r\n                        if (content.includes('{{')) {\r\n                            // hasChanges = true;\r\n\r\n                            // Replace all placeholders\r\n                            content = content\r\n                                // Package tag (full name with org if exists)\r\n                                .replace(/\\{\\{tag\\}\\}/g,            packageTag)\r\n                                .replace(/\\{\\{tag-badge\\}\\}/g,      tagBadge)\r\n\r\n                                // Repo info\r\n                                .replace(/\\{\\{name\\}\\}/g,           config.repo.name)\r\n                                .replace(/\\{\\{repo\\}\\}/g,           config.repo.name)\r\n                                .replace(/\\{\\{org\\}\\}/g,            config.repo.org || '')\r\n                                .replace(/\\{\\{desc\\}\\}/g,           config.repo.desc || `A ${config.type} space`)\r\n                                .replace(/\\{\\{description\\}\\}/g,    config.repo.desc || `A ${config.type} space`)\r\n                                .replace(/\\{\\{version\\}\\}/g,        config.repo.version)\r\n                                .replace(/\\{\\{license\\}\\}/g,        config.repo.license || 'MIT')\r\n                                //  REMOVED: keyword replacements here - handled in package.json section\r\n                                // .replace(/\\{\\{kw\\}\\}/g,             keywordsJson)\r\n                                // .replace(/\\{\\{keywords\\}\\}/g,       keywordsJson)\r\n\r\n                                // URLs\r\n                                .replace(/\\{\\{url\\}\\}/g,            gitUrl)\r\n                                .replace(/\\{\\{repo_url\\}\\}/g,       gitUrl)\r\n                                .replace(/\\{\\{git_url\\}\\}/g,        gitUrl)\r\n                                .replace(/\\{\\{homepage\\}\\}/g,       homepage)\r\n                                .replace(/\\{\\{issues\\}\\}/g,         issuesUrl)\r\n\r\n                                // Space type, template, and PM\r\n                                .replace(/\\{\\{type\\}\\}/g,           config.type)\r\n                                .replace(/\\{\\{template\\}\\}/g,       config.template || 'clean')\r\n                                .replace(/\\{\\{pm\\}\\}/g,             config.pm)\r\n\r\n                                // Author info\r\n                                .replace(/\\{\\{author\\}\\}/g,         config.author.name || '')\r\n                                .replace(/\\{\\{author_name\\}\\}/g,    config.author.name || '')\r\n                                .replace(/\\{\\{author_id\\}\\}/g,      config.author.id || '')\r\n                                .replace(/\\{\\{author_email\\}\\}/g,   config.author.email || '')\r\n                                .replace(/\\{\\{author_url\\}\\}/g,     authorUrl);\r\n\r\n                            // Write the updated content\r\n                            fs.writeFileSync(filePath, content, 'utf-8');\r\n                        }\r\n\r\n                        // Special handling for package.json FIRST\r\n                        if (filePath.endsWith('package.json')) {\r\n                            // STEP 2: Parse and further update the JSON\r\n                            const packageJson = JSON.parse(content);\r\n\r\n                            // Set full package name (with org if exists)\r\n                            packageJson.name = packageTag;\r\n                            packageJson.version = config.repo.version;\r\n                            packageJson.description = config.repo.desc || `A ${config.type} space`;\r\n                            packageJson.license = config.repo.license || 'MIT';\r\n\r\n                            //  Set keywords as array (this is correct and won't cause double-stringification)\r\n                            if (config.repo.kw && config.repo.kw.length > 0) {\r\n                                packageJson.keywords = config.repo.kw;\r\n                            } else {\r\n                                packageJson.keywords = [];\r\n                            }\r\n\r\n                            // Set homepage\r\n                            if (homepage) {\r\n                                packageJson.homepage = homepage;\r\n                            }\r\n\r\n                            // Set bugs/issues URL\r\n                            if (issuesUrl) {\r\n                                if (!packageJson.bugs) {\r\n                                    packageJson.bugs = {};\r\n                                }\r\n                                packageJson.bugs.url = issuesUrl;\r\n                            }\r\n\r\n                            // Set author\r\n                            if (config.author.name) {\r\n                                if (config.author.email) {\r\n                                    packageJson.author = {\r\n                                        name: config.author.name,\r\n                                        email: config.author.email,\r\n                                        url: authorUrl || undefined\r\n                                    };\r\n                                } else {\r\n                                    packageJson.author = {\r\n                                        name: config.author.name,\r\n                                        url: authorUrl || undefined\r\n                                    };\r\n                                }\r\n                            }\r\n\r\n                            // Set repository URL\r\n                            if (gitUrl) {\r\n                                packageJson.repository = {\r\n                                    type: 'git',\r\n                                    url: gitUrl\r\n                                };\r\n                            }\r\n\r\n                            // Update bin name for CLI projects\r\n                            if (config.type === 'cli' && packageJson.bin) {\r\n                                const oldBinName = Object.keys(packageJson.bin)[0];\r\n                                const binPath = packageJson.bin[oldBinName];\r\n                                delete packageJson.bin[oldBinName];\r\n                                packageJson.bin[config.repo.name] = binPath;\r\n                            }\r\n\r\n                            // Ensure bun engine exists\r\n                            if (!packageJson.engines) {\r\n                                packageJson.engines = {};\r\n                            }\r\n                            if (!packageJson.engines.bun) {\r\n                                packageJson.engines.bun = '>=1.0.0';\r\n                            }\r\n\r\n                            // STEP 3: Format and write package.json\r\n                            content = JsonFormatter.format(packageJson, { keyOrder: PACKAGE_JSON_KEY_ORDER });\r\n                            fs.writeFileSync(filePath, content + '\\n', 'utf-8');\r\n                            continue; // Skip the rest of the loop for package.json\r\n                        }\r\n\r\n                    } catch {\r\n                        // Silently skip files that can't be read/updated (like binaries)\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Recursively get all files in a directory\r\n            private getAllFiles(dirPath: string, arrayOfFiles: string[] = []): string[] {\r\n                const files = fs.readdirSync(dirPath);\r\n\r\n                files.forEach((file) => {\r\n                    const fullPath = path.join(dirPath, file);\r\n\r\n                    if (fs.statSync(fullPath).isDirectory()) {\r\n                        arrayOfFiles = this.getAllFiles(fullPath, arrayOfFiles);\r\n                    } else {\r\n                        arrayOfFiles.push(fullPath);\r\n                    }\r\n                });\r\n\r\n                return arrayOfFiles;\r\n            }\r\n\r\n            // Create .hmm configuration file\r\n            private createSpaceConfig(spacePath: string, config: SpaceConfig): void {\r\n                const configPath = path.join(spacePath, '.hmm');\r\n\r\n                // Generate URLs for .hmm file\r\n                const isOrgProject = config.repo.org && config.repo.org.trim() !== '';\r\n                const hasGithubId = config.author.id && config.author.id.trim() !== '';\r\n                const githubOwner = isOrgProject ? config.repo.org : (hasGithubId ? config.author.id : '');\r\n\r\n                const gitUrl = githubOwner\r\n                    ? `git+https://github.com/${githubOwner}/${config.repo.name}.git`\r\n                    : '';\r\n\r\n                const homepage = githubOwner\r\n                    ? `https://github.com/${githubOwner}/${config.repo.name}#readme`\r\n                    : '';\r\n\r\n                const issuesUrl = githubOwner\r\n                    ? `https://github.com/${githubOwner}/${config.repo.name}/issues`\r\n                    : '';\r\n\r\n                const authorUrl = hasGithubId\r\n                    ? `https://github.com/${config.author.id}`\r\n                    : (config.author.url || '');\r\n\r\n                const configWithDefaults = {\r\n                    type: config.type,\r\n                    template: config.template || 'clean',\r\n                    pm: config.pm,\r\n                    repo: {\r\n                        org: config.repo.org || '',\r\n                        name: config.repo.name,\r\n                        version: config.repo.version,\r\n                        desc: config.repo.desc || `A ${config.type} space`,\r\n                        kw: config.repo.kw || [],\r\n                        license: config.repo.license || 'MIT',\r\n                        issues: issuesUrl,\r\n                        homepage: homepage,\r\n                        git_url: gitUrl\r\n                    },\r\n                    author: {\r\n                        id: config.author.id || '',\r\n                        name: config.author.name || '',\r\n                        email: config.author.email || '',\r\n                        url: authorUrl\r\n                    },\r\n                    createdAt: new Date().toISOString()\r\n                };\r\n\r\n                const configContent = JsonFormatter.format(configWithDefaults, { keyOrder: SPACE_FILE_KEY_ORDER });\r\n\r\n                fs.writeFileSync(configPath, configContent + '\\n', 'utf-8');\r\n            }\r\n\r\n            // Safely delete directory with retry logic\r\n            private async safeDeleteDirectory(dirPath: string, maxRetries: number = 3): Promise<void> {\r\n                for (let i = 0; i < maxRetries; i++) {\r\n                    try {\r\n                        fs.rmSync(dirPath, {\r\n                            recursive: true,\r\n                            force: true,\r\n                            maxRetries: 3,\r\n                            retryDelay: 100\r\n                        });\r\n\r\n                        // Verify deletion\r\n                        if (!fs.existsSync(dirPath)) {\r\n                            return;\r\n                        }\r\n                    } catch (error) {\r\n                        if (i === maxRetries - 1) {\r\n                            throw error;\r\n                        }\r\n                        // Wait before retry\r\n                        await new Promise(resolve => setTimeout(resolve, 300 * (i + 1)));\r\n                    }\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/app/mod/jsonFormatter.ts\r\n//\r\n// Developed with  by Maysara.\r\n\r\n\r\n//  TYPE \r\n\r\n    import * as fs from 'fs';\r\n    import * as path from 'path';\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export interface FormatOptions {\r\n        indent?         : string;   // default: '\\t'\r\n        alignColons?    : boolean;  // default: true\r\n        sortKeys?       : boolean;  // default: false\r\n        tabWidth?       : number;   // default: 4 (visual width of a tab character)\r\n        keyOrder?       : string[]; // custom key order (keys not in list appear at end)\r\n    }\r\n\r\n    export const PACKAGE_JSON_KEY_ORDER = [\r\n        'name',\r\n        'version',\r\n        'description',\r\n        'keywords',\r\n        'license',\r\n        'homepage',\r\n        'bugs',\r\n        'author',\r\n        'repository',\r\n        'type',\r\n        'main',\r\n        'types',\r\n        'bin',\r\n        'files',\r\n        'exports',\r\n        'scripts',\r\n        'engines',\r\n        'peerDependencies',\r\n        'dependencies',\r\n        'devDependencies'\r\n    ];\r\n\r\n    export const SPACE_FILE_KEY_ORDER = [\r\n        'type',\r\n        'template',\r\n        'pm',\r\n        'repo',\r\n        'author',\r\n        'createdAt'\r\n    ];\r\n\r\n    // For nested objects in repo\r\n    export const REPO_KEY_ORDER = [\r\n        'org',\r\n        'name',\r\n        'version',\r\n        'desc',\r\n        'kw',\r\n        'license',\r\n        'issues',\r\n        'homepage',\r\n        'git_url'\r\n    ];\r\n\r\n    // For nested objects in author\r\n    export const AUTHOR_KEY_ORDER = [\r\n        'id',\r\n        'name',\r\n        'email',\r\n        'url'\r\n    ];\r\n\r\n    type JsonValue = string | number | boolean | null | JsonObject | JsonArray;\r\n    interface JsonObject {\r\n        [key: string]: JsonValue;\r\n    }\r\n    type JsonArray = JsonValue[];\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class JsonFormatter {\r\n\r\n        //  MAIN \r\n\r\n            // Format JSON with custom alignment and indentation\r\n            static format(obj: JsonValue, options: FormatOptions = {}): string {\r\n                const indent = options.indent || '\\t';\r\n                const alignColons = options.alignColons !== false;\r\n                const sortKeys = options.sortKeys || false;\r\n                const tabWidth = options.tabWidth || 4;\r\n                const keyOrder = options.keyOrder || [];\r\n\r\n                // Calculate GLOBAL max key length across all nesting levels\r\n                const globalMaxKeyLength = alignColons ? this.calculateGlobalMaxKeyLength(obj) : 0;\r\n\r\n                // Calculate max indent depth (in visual characters)\r\n                const maxDepth = this.calculateMaxDepth(obj);\r\n                const maxIndentWidth = maxDepth * (indent === '\\t' ? tabWidth : indent.length);\r\n\r\n                return this.formatValue(obj, 0, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder);\r\n            }\r\n\r\n            // Format and write to file\r\n            static formatFile(filePath: string, options: FormatOptions = {}): void {\r\n                let content = fs.readFileSync(filePath, 'utf-8');\r\n                // Remove BOM if present\r\n                if (content.charCodeAt(0) === 0xFEFF) {\r\n                    content = content.slice(1);\r\n                }\r\n                const obj = JSON.parse(content) as JsonValue;\r\n                const formatted = this.format(obj, options);\r\n                // Write without BOM\r\n                // const utf8NoBom = new TextEncoder();\r\n                fs.writeFileSync(filePath, formatted + '\\n', 'utf-8');\r\n            }\r\n\r\n            // Find all JSON files in directory recursively (excluding node_modules)\r\n            static findJsonFiles(dirPath: string): string[] {\r\n                const jsonFiles: string[] = [];\r\n\r\n                const traverse = (currentPath: string): void => {\r\n                    if (!fs.existsSync(currentPath)) {\r\n                        return;\r\n                    }\r\n\r\n                    const entries = fs.readdirSync(currentPath, { withFileTypes: true });\r\n\r\n                    entries.forEach(entry => {\r\n                        const fullPath = path.join(currentPath, entry.name);\r\n\r\n                        // Skip node_modules\r\n                        if (entry.name === 'node_modules') {\r\n                            return;\r\n                        }\r\n\r\n                        if (entry.isDirectory()) {\r\n                            traverse(fullPath);\r\n                        } else if (entry.isFile() && entry.name.endsWith('.json')) {\r\n                            jsonFiles.push(fullPath);\r\n                        }\r\n                    });\r\n                };\r\n\r\n                traverse(dirPath);\r\n                return jsonFiles;\r\n            }\r\n\r\n            // Format all JSON files in directory and subdirectories\r\n            static formatDirectory(dirPath: string, options: FormatOptions = {}): { success: string[], failed: { file: string, error: string }[] } {\r\n                const results = { success: [] as string[], failed: [] as { file: string, error: string }[] };\r\n                const jsonFiles = this.findJsonFiles(dirPath);\r\n\r\n                jsonFiles.forEach(filePath => {\r\n                    try {\r\n                        this.formatFile(filePath, options);\r\n                        results.success.push(filePath);\r\n                    } catch (error) {\r\n                        results.failed.push({\r\n                            file: filePath,\r\n                            error: error instanceof Error ? error.message : String(error)\r\n                        });\r\n                    }\r\n                });\r\n\r\n                return results;\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            // Calculate the maximum nesting depth\r\n            private static calculateMaxDepth(obj: JsonValue, currentDepth: number = 0): number {\r\n                if (!obj || typeof obj !== 'object') {\r\n                    return currentDepth;\r\n                }\r\n\r\n                let maxDepth = currentDepth;\r\n\r\n                if (Array.isArray(obj)) {\r\n                    obj.forEach(item => {\r\n                        const depth = this.calculateMaxDepth(item, currentDepth + 1);\r\n                        if (depth > maxDepth) maxDepth = depth;\r\n                    });\r\n                } else {\r\n                    Object.values(obj).forEach(value => {\r\n                        const depth = this.calculateMaxDepth(value, currentDepth + 1);\r\n                        if (depth > maxDepth) maxDepth = depth;\r\n                    });\r\n                }\r\n\r\n                return maxDepth;\r\n            }\r\n\r\n            // Sort keys based on custom order or alphabetically\r\n            private static sortKeys(keys: string[], keyOrder: string[], sortAlphabetically: boolean): string[] {\r\n                if (keyOrder.length === 0) {\r\n                    return sortAlphabetically ? keys.sort() : keys;\r\n                }\r\n\r\n                // Separate keys into ordered and unordered\r\n                const orderedKeys: string[] = [];\r\n                const unorderedKeys: string[] = [];\r\n\r\n                keys.forEach(key => {\r\n                    if (keyOrder.includes(key)) {\r\n                        orderedKeys.push(key);\r\n                    } else {\r\n                        unorderedKeys.push(key);\r\n                    }\r\n                });\r\n\r\n                // Sort ordered keys by their position in keyOrder\r\n                orderedKeys.sort((a, b) => keyOrder.indexOf(a) - keyOrder.indexOf(b));\r\n\r\n                // Sort unordered keys alphabetically if sortKeys is true\r\n                if (sortAlphabetically) {\r\n                    unorderedKeys.sort();\r\n                }\r\n\r\n                // Return ordered keys first, then unordered\r\n                return [...orderedKeys, ...unorderedKeys];\r\n            }\r\n\r\n            private static calculateGlobalMaxKeyLength(obj: JsonValue): number {\r\n                let maxLength = 0;\r\n\r\n                const traverse = (value: JsonValue): void => {\r\n                    if (!value || typeof value !== 'object') {\r\n                        return;\r\n                    }\r\n\r\n                    if (Array.isArray(value)) {\r\n                        value.forEach(item => traverse(item));\r\n                        return;\r\n                    }\r\n\r\n                    // It's an object\r\n                    const keys = Object.keys(value);\r\n                    keys.forEach(key => {\r\n                        const keyLength = JSON.stringify(key).length;\r\n                        if (keyLength > maxLength) {\r\n                            maxLength = keyLength;\r\n                        }\r\n                        traverse(value[key]);\r\n                    });\r\n                };\r\n\r\n                traverse(obj);\r\n                return maxLength;\r\n            }\r\n\r\n            // Format any JSON value recursively\r\n            private static formatValue(\r\n                value: JsonValue,\r\n                depth: number,\r\n                indent: string,\r\n                alignColons: boolean,\r\n                sortKeys: boolean,\r\n                globalMaxKeyLength: number,\r\n                maxIndentWidth: number,\r\n                tabWidth: number,\r\n                keyOrder: string[]\r\n            ): string {\r\n                if (value === null) return 'null';\r\n                if (value === undefined) return 'undefined';\r\n\r\n                const type = typeof value;\r\n\r\n                if (type === 'string') {\r\n                    return JSON.stringify(value);\r\n                }\r\n\r\n                if (type === 'number' || type === 'boolean') {\r\n                    return String(value);\r\n                }\r\n\r\n                if (Array.isArray(value)) {\r\n                    return this.formatArray(value, depth, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder);\r\n                }\r\n\r\n                if (type === 'object') {\r\n                    return this.formatObject(value as JsonObject, depth, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder);\r\n                }\r\n\r\n                return JSON.stringify(value);\r\n            }\r\n\r\n            // Format an array\r\n            private static formatArray(\r\n                arr: JsonArray,\r\n                depth: number,\r\n                indent: string,\r\n                alignColons: boolean,\r\n                sortKeys: boolean,\r\n                globalMaxKeyLength: number,\r\n                maxIndentWidth: number,\r\n                tabWidth: number,\r\n                keyOrder: string[]\r\n            ): string {\r\n                if (arr.length === 0) return '[]';\r\n\r\n                // Check if array is simple (primitives only)\r\n                const isSimple = arr.every(item =>\r\n                    typeof item === 'string' ||\r\n                    typeof item === 'number' ||\r\n                    typeof item === 'boolean' ||\r\n                    item === null\r\n                );\r\n\r\n                if (isSimple && arr.length <= 3) {\r\n                    // Inline simple short arrays\r\n                    return '[' + arr.map(item => this.formatValue(item, depth, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder)).join(', ') + ']';\r\n                }\r\n\r\n                // Multi-line array\r\n                const currentIndent = indent.repeat(depth + 1);\r\n                const items = arr.map(item =>\r\n                    currentIndent + this.formatValue(item, depth + 1, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder)\r\n                );\r\n\r\n                return '[\\n' + items.join(',\\n') + '\\n' + indent.repeat(depth) + ']';\r\n            }\r\n\r\n            // Format an object with GLOBAL alignment accounting for indentation\r\n            private static formatObject(\r\n                obj: JsonObject,\r\n                depth: number,\r\n                indent: string,\r\n                alignColons: boolean,\r\n                sortKeys: boolean,\r\n                globalMaxKeyLength: number,\r\n                maxIndentWidth: number,\r\n                tabWidth: number,\r\n                keyOrder: string[]\r\n            ): string {\r\n                if (Object.keys(obj).length === 0) return '{}';\r\n\r\n                let keys = Object.keys(obj);\r\n\r\n                // Apply custom ordering\r\n                keys = this.sortKeys(keys, keyOrder, sortKeys);\r\n\r\n                const currentIndent = indent.repeat(depth + 1);\r\n\r\n                // Calculate visual width of current indentation\r\n                const currentIndentWidth = (depth + 1) * (indent === '\\t' ? tabWidth : indent.length);\r\n\r\n                // Format each key-value pair\r\n                const lines = keys.map(key => {\r\n                    const jsonKey = JSON.stringify(key);\r\n                    const value = this.formatValue(obj[key], depth + 1, indent, alignColons, sortKeys, globalMaxKeyLength, maxIndentWidth, tabWidth, keyOrder);\r\n\r\n                    // Check if value is a nested object (not array, not null)\r\n                    const isNestedObject = obj[key] !== null && typeof obj[key] === 'object' && !Array.isArray(obj[key]);\r\n\r\n                    if (alignColons && !isNestedObject) {\r\n                        // Padding = (max indent width - current indent width) + (max key length - current key length)\r\n                        const indentDiff = maxIndentWidth - currentIndentWidth;\r\n                        const keyDiff = globalMaxKeyLength - jsonKey.length;\r\n                        const padding = ' '.repeat(indentDiff + keyDiff);\r\n                        return `${currentIndent}${jsonKey}${padding} : ${value}`;\r\n                    } else {\r\n                        return `${currentIndent}${jsonKey}: ${value}`;\r\n                    }\r\n                });\r\n\r\n                return '{\\n' + lines.join(',\\n') + '\\n' + indent.repeat(depth) + '}';\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CLI \r\n\r\n    // Run from CLI: node my_json_formatter.ts [directory]\r\n    if (require.main === module) {\r\n        let targetDir = process.argv[2] || process.cwd();\r\n\r\n        // Resolve relative paths to absolute\r\n        if (!path.isAbsolute(targetDir)) {\r\n            targetDir = path.resolve(process.cwd(), targetDir);\r\n        }\r\n\r\n        // console.log(` Scanning for JSON files in: ${targetDir}\\n`);\r\n\r\n        const results = JsonFormatter.formatDirectory(targetDir, {\r\n            alignColons: true,\r\n            sortKeys: false\r\n        });\r\n\r\n        if (results.success.length > 0) {\r\n            // console.log(` Successfully formatted ${results.success.length} file(s):`);\r\n            // results.success.forEach(file => {\r\n            //     const relative = path.relative(process.cwd(), file);\r\n            //     console.log(`   - ${relative}`);\r\n            // });\r\n        }\r\n\r\n        if (results.failed.length > 0) {\r\n            // console.log(`\\n Failed to format ${results.failed.length} file(s):`);\r\n            // results.failed.forEach(({ file, error }) => {\r\n            //     const relative = path.relative(process.cwd(), file);\r\n            //     console.log(`   - ${relative}: ${error}`);\r\n            // });\r\n        }\r\n\r\n        if (results.success.length === 0 && results.failed.length === 0) {\r\n            // console.log(' No JSON files found.');\r\n        }\r\n    }\r\n\r\n// ","// src/app/mod/packageManager.ts\r\n//\r\n// Developed with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { JsonFormatter, PACKAGE_JSON_KEY_ORDER }    from './jsonFormatter';\r\n    import { Loader }                                   from './loader';\r\n    import * as path                                    from 'path';\r\n    import * as fs                                      from 'fs';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class PackageManagerWrapper {\r\n\r\n        //  INIT \r\n\r\n            // // Always use bun\r\n            // private readonly pm = 'bun';\r\n\r\n            // Default scripts\r\n            private readonly DEFAULT_SCRIPTS = {\r\n                build: 'tsup',\r\n                test: 'test',\r\n                lint: 'eslint src --ext .ts',\r\n            };\r\n\r\n            constructor() {\r\n                // No need for pm parameter anymore\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            // Install packages\r\n            install(packages?: string[], options?: { dev?: boolean; global?: boolean }): void {\r\n                const args: string[] = [];\r\n\r\n                // Handle global installations differently\r\n                if (options?.global) {\r\n                    args.push('install', '--global');\r\n\r\n                    if (packages && packages.length > 0) {\r\n                        args.push(...packages);\r\n                    } else {\r\n                        console.error(' Please specify packages to install globally');\r\n                        process.exit(1);\r\n                    }\r\n                } else {\r\n                    args.push('install');\r\n\r\n                    if (packages && packages.length > 0) {\r\n                        args.push(...packages);\r\n                    }\r\n\r\n                    if (options?.dev) {\r\n                        args.push('--dev');\r\n                    }\r\n                }\r\n\r\n                console.log(` Installing${packages ? ` ${packages.join(', ')}` : ' dependencies'}${options?.global ? ' globally' : ''}...`);\r\n                this.execute(args);\r\n\r\n                // Format package.json after install (only for local installs)\r\n                if (!options?.global) {\r\n                    this.format();\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Remove packages\r\n             */\r\n            remove(packages: string[], options?: { global?: boolean }): void {\r\n                const args = ['remove'];\r\n\r\n                if (options?.global) {\r\n                    args.push('--global');\r\n                }\r\n\r\n                args.push(...packages);\r\n\r\n                console.log(` Removing ${packages.join(', ')}${options?.global ? ' globally' : ''}...`);\r\n                this.execute(args);\r\n\r\n                // Format package.json after remove (only for local removes)\r\n                if (!options?.global) {\r\n                    this.format();\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Link package(s) globally or link global package(s) to current project\r\n             * - No args: Links current package globally (bun link)\r\n             * - With package name(s): Links global package(s) to current project (bun link <package1> <package2> ...)\r\n             */\r\n            link(packageNames?: string | string[]): void {\r\n                if (packageNames) {\r\n                    const packages = Array.isArray(packageNames) ? packageNames : [packageNames];\r\n                    const packageList = packages.join(', ');\r\n                    console.log(` Linking global package${packages.length > 1 ? 's' : ''} \"${packageList}\" to current project...`);\r\n                    this.execute(['link', ...packages]);\r\n                } else {\r\n                    console.log(' Linking current package globally...');\r\n                    this.execute(['link']);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Unlink package(s) globally or unlink global package(s) from current project\r\n             * - No args: Unlinks current package globally (bun unlink)\r\n             * - With package name(s): Unlinks global package(s) from current project (bun unlink <package1> <package2> ...)\r\n             */\r\n            unlink(packageNames?: string | string[]): void {\r\n                if (packageNames) {\r\n                    const packages = Array.isArray(packageNames) ? packageNames : [packageNames];\r\n                    const packageList = packages.join(', ');\r\n                    console.log(` Unlinking global package${packages.length > 1 ? 's' : ''} \"${packageList}\" from current project...`);\r\n                    this.execute(['unlink', ...packages]);\r\n                } else {\r\n                    console.log(' Unlinking current package globally...');\r\n                    this.execute(['unlink']);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Run a script from package.json (with fallback to default)\r\n             */\r\n            run(script: string, args?: string[]): void {\r\n                const scriptCommand = this.getScriptCommand(script);\r\n\r\n                if (!scriptCommand) {\r\n                    console.error(` Script \"${script}\" not found in package.json and no default available`);\r\n                    process.exit(1);\r\n                }\r\n\r\n                // If using default script, run it directly\r\n                if (this.isUsingDefaultScript(script)) {\r\n                    const commandParts = scriptCommand.split(' ');\r\n                    const command = [...commandParts];\r\n\r\n                    if (args && args.length > 0) {\r\n                        command.push(...args);\r\n                    }\r\n\r\n                    this.execute(command);\r\n                } else {\r\n                    // Use bun run for package.json scripts\r\n                    const command = ['run', script];\r\n                    if (args && args.length > 0) {\r\n                        command.push('--', ...args);\r\n                    }\r\n                    this.execute(command);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Run a script from package.json silently (with fallback to default)\r\n             */\r\n            runSilent(script: string, args?: string[]): void {\r\n                const scriptCommand = this.getScriptCommand(script);\r\n\r\n                if (!scriptCommand) {\r\n                    throw new Error(`Script \"${script}\" not found in package.json and no default available`);\r\n                }\r\n\r\n                // If using default script, run it directly\r\n                if (this.isUsingDefaultScript(script)) {\r\n                    const commandParts = scriptCommand.split(' ');\r\n                    const command = [...commandParts];\r\n\r\n                    if (args && args.length > 0) {\r\n                        command.push(...args);\r\n                    }\r\n\r\n                    this.executeSilent(command);\r\n                } else {\r\n                    // Use bun run for package.json scripts\r\n                    const command = ['run', script];\r\n                    if (args && args.length > 0) {\r\n                        command.push('--', ...args);\r\n                    }\r\n                    this.executeSilent(command);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Update packages\r\n             */\r\n            update(packages?: string[]): void {\r\n                console.log(` Updating${packages ? ` ${packages.join(', ')}` : ' all packages'}...`);\r\n\r\n                const args = ['update'];\r\n                if (packages && packages.length > 0) {\r\n                    args.push(...packages);\r\n                }\r\n                this.execute(args);\r\n\r\n                // Format package.json after update\r\n                this.format();\r\n            }\r\n\r\n            /**\r\n             * List installed packages\r\n             */\r\n            list(options?: { global?: boolean }): void {\r\n                const args = ['pm', 'ls'];\r\n                if (options?.global) {\r\n                    args.push('--global');\r\n                }\r\n                this.execute(args);\r\n            }\r\n\r\n            /**\r\n             * Initialize a new package.json\r\n             */\r\n            init(): void {\r\n                console.log(' Initializing package.json...');\r\n                this.execute(['init', '-y']);\r\n\r\n                // Format package.json after init\r\n                this.format();\r\n            }\r\n\r\n            /**\r\n             * Publish package (uses bun for publishing - simpler and more reliable)\r\n             */\r\n            publish(options?: { tag?: string; access?: 'public' | 'restricted' }, loader?: Loader): void {\r\n                // Publish with bun (more reliable than npm)\r\n                const args = ['publish'];\r\n                if (options?.tag) {\r\n                    args.push('--tag', options.tag);\r\n                }\r\n                // Always set access flag for scoped packages, default to public\r\n                const access = options?.access || 'public';\r\n                args.push('--access', access);\r\n\r\n                // Stop loader before running interactive publish process\r\n                if (loader) {\r\n                    loader.stop('');\r\n                }\r\n\r\n                // Use inherit mode to allow interactive authentication\r\n                const publishProc = Bun.spawnSync(['bun', ...args], {\r\n                    stdout: 'inherit',\r\n                    stderr: 'inherit',\r\n                    stdin: 'inherit'\r\n                });\r\n\r\n                if (publishProc.exitCode === 0) {\r\n                    console.log(' Published successfully!');\r\n                } else {\r\n                    console.error(' Publish failed!');\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Execute bun command\r\n             */\r\n            execute(args: string[]): void {\r\n                const proc = Bun.spawnSync(['bun', ...args], {\r\n                    stdout: 'inherit',\r\n                    stderr: 'inherit'\r\n                });\r\n\r\n                if (proc.exitCode !== 0) {\r\n                    console.error(` Command failed: bun ${args.join(' ')}`);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Execute bun command silently\r\n             */\r\n            executeSilent(args: string[]): void {\r\n                const proc = Bun.spawnSync(['bun', ...args], {\r\n                    stdout: 'pipe',\r\n                    stderr: 'pipe'\r\n                });\r\n\r\n                if (proc.exitCode !== 0) {\r\n                    // Only show errors if command failed\r\n                    const stderr = new TextDecoder().decode(proc.stderr);\r\n                    console.error(` Command failed: bun ${args.join(' ')}`);\r\n                    if (stderr) {\r\n                        console.error(stderr);\r\n                    }\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Get package manager name\r\n             */\r\n            getName(): string {\r\n                return 'bun';\r\n            }\r\n\r\n            /**\r\n             * Get package manager emoji\r\n             */\r\n            getEmoji(): string {\r\n                return '';\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            /**\r\n             * Format package.json after operations\r\n             */\r\n            private format(): void {\r\n                try {\r\n                    const pkgPath = path.join(process.cwd(), 'package.json');\r\n                    if (fs.existsSync(pkgPath)) {\r\n                        JsonFormatter.formatFile(pkgPath, { keyOrder: PACKAGE_JSON_KEY_ORDER });\r\n                    }\r\n                } catch {\r\n                    // Silently ignore formatting errors\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Get script command (from package.json or default)\r\n             */\r\n            private getScriptCommand(script: string): string | null {\r\n                const pkgPath = path.join(process.cwd(), 'package.json');\r\n\r\n                // Try to read package.json\r\n                if (fs.existsSync(pkgPath)) {\r\n                    try {\r\n                        const pkg = JSON.parse(fs.readFileSync(pkgPath, 'utf-8'));\r\n\r\n                        // Check if script exists in package.json\r\n                        if (pkg.scripts && pkg.scripts[script]) {\r\n                            return pkg.scripts[script];\r\n                        }\r\n                    } catch {\r\n                        // If can't read package.json, fall through to defaults\r\n                    }\r\n                }\r\n\r\n                // Return default script if available\r\n                if (script in this.DEFAULT_SCRIPTS) {\r\n                    return this.DEFAULT_SCRIPTS[script as keyof typeof this.DEFAULT_SCRIPTS];\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            /**\r\n             * Check if using default script (not from package.json)\r\n             */\r\n            private isUsingDefaultScript(script: string): boolean {\r\n                const pkgPath = path.join(process.cwd(), 'package.json');\r\n\r\n                if (fs.existsSync(pkgPath)) {\r\n                    try {\r\n                        const pkg = JSON.parse(fs.readFileSync(pkgPath, 'utf-8'));\r\n\r\n                        // If script exists in package.json, not using default\r\n                        if (pkg.scripts && pkg.scripts[script]) {\r\n                            return false;\r\n                        }\r\n                    } catch {\r\n                        // If can't read, assume using default\r\n                    }\r\n                }\r\n\r\n                // Using default if script is in DEFAULT_SCRIPTS\r\n                return script in this.DEFAULT_SCRIPTS;\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/app/mod/promptHelper.ts\r\n//\r\n// Developed with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { input, select, confirm }   from '@inquirer/prompts';\r\n    import { TemplateRegistry }         from './templateRegistry';\r\n    import type { SpaceType }           from '../../types';\r\n\r\n// \r\n\r\n\r\n\r\n//  TYPE \r\n\r\n    export interface InitPromptAnswers {\r\n        name            : string;\r\n        type            : 'lib' | 'cli' | 'server';\r\n        template        : string;\r\n        description     : string;\r\n        packageManager  : 'bun' | 'npm';\r\n        author          : string;\r\n        authorEmail     : string;\r\n        githubId        : string;\r\n        keywords        : string[];\r\n        license         : string;\r\n    }\r\n\r\n    export interface PublishPromptAnswers {\r\n        confirm         : boolean;\r\n        tag?            : string;\r\n        access?         : 'public' | 'restricted';\r\n    }\r\n\r\n    export interface RemovePromptAnswers {\r\n        packages        : string[];\r\n        confirm         : boolean;\r\n    }\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class PromptHelper {\r\n\r\n        //  MAIN \r\n\r\n            /**\r\n             * Prompt for init command parameters\r\n             */\r\n            static async promptInit(params: {\r\n                name?       : string;\r\n                org?        : string;\r\n                type?       : string;\r\n                template?   : string;\r\n                desc?       : string;\r\n            }): Promise<InitPromptAnswers> {\r\n\r\n                let name                = params.name;\r\n                let type                = params.type;\r\n                let template            = params.template;\r\n                let description         = params.desc;\r\n                let author              = '';\r\n\r\n                // Name (supports @org/name format)\r\n                if (!name || name === 'my-space') {\r\n                    name = await input({\r\n                        message: 'name:',\r\n                        default: 'my-space',\r\n                        validate: (value: string) => {\r\n                            if (!value || value.trim() === '') {\r\n                                return 'Space name is required';\r\n                            }\r\n                            // Check for @org/name format\r\n                            const orgRegex = /^@([a-z0-9-_]+)\\/([a-z0-9-_]+)$/;\r\n                            const simpleRegex = /^[a-z0-9-_]+$/;\r\n\r\n                            if (!orgRegex.test(value) && !simpleRegex.test(value)) {\r\n                                return 'Name must be either \"package-name\" or \"@org/package-name\" (lowercase, numbers, hyphens, underscores only)';\r\n                            }\r\n                            return true;\r\n                        }\r\n                    });\r\n                }\r\n\r\n                // Type\r\n                if (!type) {\r\n                    // Check which space types have ready templates\r\n                    const libReady = TemplateRegistry.getTemplatesForType('lib', false).length > 0;\r\n                    const cliReady = TemplateRegistry.getTemplatesForType('cli', false).length > 0;\r\n                    const serverReady = TemplateRegistry.getTemplatesForType('server', false).length > 0;\r\n                    const webReady = TemplateRegistry.getTemplatesForType('app', false).length > 0;\r\n\r\n                    type = await select({\r\n                        message: 'type:',\r\n                        choices: [\r\n                            {\r\n                                name: ` Library    - TypeScript library for npm${!libReady ? ' (Coming Soon)' : ''}`,\r\n                                value: 'lib',\r\n                                disabled: !libReady ? 'No templates ready yet' : false\r\n                            },\r\n                            {\r\n                                name: ` CLI        - Command-line tool${!cliReady ? ' (Coming Soon)' : ''}`,\r\n                                value: 'cli',\r\n                                disabled: !cliReady ? 'No templates ready yet' : false\r\n                            },\r\n                            {\r\n                                name: ` Server     - Backend server application${!serverReady ? ' (Coming Soon)' : ''}`,\r\n                                value: 'server',\r\n                                disabled: !serverReady ? 'No templates ready yet' : false\r\n                            },\r\n                            {\r\n                                name: ` Web App    - Full-stack web application${!webReady ? ' (Coming Soon)' : ''}`,\r\n                                value: 'web',\r\n                                disabled: !webReady ? 'No templates ready yet' : false\r\n                            }\r\n                        ]\r\n                    });\r\n                }\r\n\r\n                // Template Variant (based on type) - show all templates with status\r\n                if (!template) {\r\n                    const allTemplates = TemplateRegistry.getTemplatesForType(type as SpaceType, true);\r\n                    const readyTemplates = allTemplates.filter(t => t.ready);\r\n\r\n                    // Check if there are any ready templates\r\n                    if (readyTemplates.length === 0) {\r\n                        throw new Error(`No templates are ready yet for \"${type}\" spaces. This space type is coming soon!`);\r\n                    }\r\n\r\n                    const templateChoices = allTemplates.map(t => {\r\n                        const statusEmoji = t.ready ? '' : '';\r\n                        const statusText = t.ready ? '' : ' (Coming Soon)';\r\n                        return {\r\n                            name: `${statusEmoji} ${t.label}${statusText} - ${t.description}`,\r\n                            value: t.name,\r\n                            short: t.label,\r\n                            disabled: !t.ready ? 'Not ready yet' : false\r\n                        };\r\n                    });\r\n\r\n                    template = await select({\r\n                        message: 'template:',\r\n                        choices: templateChoices,\r\n                        default: TemplateRegistry.getDefaultTemplate(type as SpaceType)\r\n                    });\r\n                }\r\n\r\n                // Description\r\n                if (!description) {\r\n                    const defaultDesc = type === 'lib'\r\n                        ? `A TypeScript library`\r\n                        : type === 'cli'\r\n                            ? `A command-line tool`\r\n                            : `A backend server`;\r\n\r\n                    description = await input({\r\n                        message: 'desc:',\r\n                        default: defaultDesc\r\n                    });\r\n                }\r\n\r\n                // Package Manager - Always use bun (removed from prompt)\r\n                const packageManager = 'bun';\r\n\r\n                // Author name\r\n                author = await input({\r\n                    message: 'author name:',\r\n                    default: ''\r\n                });\r\n\r\n                // Author email\r\n                const authorEmail = await input({\r\n                    message: 'author email:',\r\n                    default: '',\r\n                    validate: (value: string) => {\r\n                        if (value && !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value)) {\r\n                            return 'Please enter a valid email address or leave empty';\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                // GitHub username\r\n                const githubId = await input({\r\n                    message: 'github username:',\r\n                    default: '',\r\n                    validate: (value: string) => {\r\n                        if (value && !/^[a-z0-9]([a-z0-9-]*[a-z0-9])?$/i.test(value)) {\r\n                            return 'Please enter a valid GitHub username or leave empty';\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                // Keywords\r\n                const keywordsInput = await input({\r\n                    message: 'keywords (comma-separated):',\r\n                    default: '',\r\n                });\r\n\r\n                const keywords = keywordsInput\r\n                    ? keywordsInput.split(',').map(k => k.trim()).filter(k => k)\r\n                    : [];\r\n\r\n                // License\r\n                const license = await input({\r\n                    message: 'license:',\r\n                    default: 'MIT'\r\n                });\r\n\r\n                return {\r\n                    name,\r\n                    type: type as 'lib' | 'cli' | 'server',\r\n                    template,\r\n                    description,\r\n                    packageManager: packageManager as 'bun' | 'npm',\r\n                    author,\r\n                    authorEmail,\r\n                    githubId,\r\n                    keywords,\r\n                    license\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Prompt for publish confirmation and options\r\n             */\r\n            static async promptPublish(spaceName: string): Promise<PublishPromptAnswers> {\r\n                const shouldPublish = await confirm({\r\n                    message: `Are you sure you want to publish \"${spaceName}\" to npm?`,\r\n                    default: false\r\n                });\r\n\r\n                if (!shouldPublish) {\r\n                    return {\r\n                        confirm: false\r\n                    };\r\n                }\r\n\r\n                const tag = await input({\r\n                    message: 'Publish with a tag (e.g., beta, next) or leave empty for latest:',\r\n                    default: ''\r\n                });\r\n\r\n                const access = await select({\r\n                    message: ' Access level:',\r\n                    choices: [\r\n                        { name: 'Public - Anyone can install', value: 'public' },\r\n                        { name: 'Restricted - Requires authentication', value: 'restricted' }\r\n                    ],\r\n                    default: 'public'\r\n                });\r\n\r\n                return {\r\n                    confirm: true,\r\n                    tag: tag || undefined,\r\n                    access: access as 'public' | 'restricted'\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Prompt for package removal confirmation\r\n             */\r\n            static async promptRemove(packages: string[]): Promise<RemovePromptAnswers> {\r\n                const shouldRemove = await confirm({\r\n                    message: `Remove ${packages.join(', ')}?`,\r\n                    default: true\r\n                });\r\n\r\n                return {\r\n                    packages,\r\n                    confirm: shouldRemove\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Simple confirmation prompt helper\r\n             */\r\n            static async promptConfirm(message: string, defaultValue: boolean = false): Promise<boolean> {\r\n                const readline = await import('readline');\r\n                const rl = readline.createInterface({\r\n                    input   : process.stdin,\r\n                    output  : process.stdout\r\n                });\r\n\r\n                const defaultText = defaultValue ? ' (Y/n)' : ' (y/N)';\r\n\r\n                return new Promise((resolve) => {\r\n                    rl.question(`${message}${defaultText} `, (answer: string) => {\r\n                        rl.close();\r\n\r\n                        if (answer.trim() === '') {\r\n                            resolve(defaultValue);\r\n                        } else {\r\n                            resolve(answer.trim().toLowerCase() === 'y' || answer.trim().toLowerCase() === 'yes');\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Prompt for package installation\r\n             */\r\n            static async promptInstall(currentPackages?: string): Promise<{\r\n                packages: string[];\r\n                isDev: boolean;\r\n            }> {\r\n                const packagesInput = await input({\r\n                    message: 'Enter package names (space-separated):',\r\n                    default: currentPackages || '',\r\n                    validate: (value: string) => {\r\n                        if (!value || value.trim() === '') {\r\n                            return 'Please enter at least one package name';\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                const isDev = await confirm({\r\n                    message: '  Install as dev dependency?',\r\n                    default: false\r\n                });\r\n\r\n                return {\r\n                    packages: packagesInput.split(' ').filter((p: string) => p.trim()),\r\n                    isDev\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Prompt for package update selection\r\n             */\r\n            static async promptUpdate(): Promise<{ updateAll: boolean; packages?: string[] }> {\r\n                const updateType = await select({\r\n                    message: 'What do you want to update?',\r\n                    choices: [\r\n                        { name: 'All packages', value: 'all' },\r\n                        { name: 'Specific packages', value: 'specific' }\r\n                    ]\r\n                });\r\n\r\n                if (updateType === 'all') {\r\n                    return {\r\n                        updateAll: true\r\n                    };\r\n                }\r\n\r\n                const packagesInput = await input({\r\n                    message: ' Enter package names (space-separated):',\r\n                    validate: (value: string) => {\r\n                        if (!value || value.trim() === '') {\r\n                            return 'Please enter at least one package name';\r\n                        }\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                return {\r\n                    updateAll: false,\r\n                    packages: packagesInput.split(' ').filter((p: string) => p.trim())\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Prompt user if they want to use current directory\r\n             */\r\n            static async promptUseCurrentDir(dirName: string): Promise<boolean> {\r\n                const shouldUse = await confirm({\r\n                    message: `Use current directory \"${dirName}\" as the space root?`,\r\n                    default: true\r\n                });\r\n\r\n                return shouldUse;\r\n            }\r\n\r\n            /**\r\n             * Prompt user if they want to delete existing directory\r\n             */\r\n            static async promptDeleteExistingDir(dirPath: string): Promise<boolean> {\r\n                const shouldDelete = await confirm({\r\n                    message: `  Directory already exists at \"${dirPath}\". Delete and recreate?`,\r\n                    default: false\r\n                });\r\n\r\n                return shouldDelete;\r\n            }\r\n\r\n            /**\r\n             * Show a success message with next steps\r\n             */\r\n            static showSuccess(spaceName: string, nextSteps: string[]) {\r\n                console.log('');\r\n                nextSteps.forEach((step) => {\r\n                    console.log(` ${step}`);\r\n                });\r\n                console.log('');\r\n            }\r\n\r\n            /**\r\n             * Show an error message\r\n             */\r\n            static showError(message: string, error?: Error) {\r\n                console.log('\\n Error:', message);\r\n                if (error && error.message) {\r\n                    console.log(`   ${error.message}`);\r\n                }\r\n                console.log('');\r\n            }\r\n\r\n            /**\r\n             * Show a warning message\r\n             */\r\n            static showWarning(message: string) {\r\n                console.log('\\n  Warning:', message);\r\n                console.log('');\r\n            }\r\n\r\n            /**\r\n             * Show an info message\r\n             */\r\n            static showInfo(message: string) {\r\n                console.log('\\n  ', message);\r\n                console.log('');\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/app/mod/loader.ts\r\n//\r\n// Developed with  by Maysara.\r\n\r\n\r\n//  CORE \r\n\r\n    export class Loader {\r\n\r\n        //  INIT \r\n\r\n            private frames: string[] = ['', '', '', '', '', '', '', '', '', ''];\r\n            private currentFrame: number = 0;\r\n            private interval: NodeJS.Timeout | null = null;\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            start(message: string): void {\r\n                process.stdout.write(`\\n${message}`);\r\n                this.interval = setInterval(() => {\r\n                    process.stdout.write(`\\r${this.frames[this.currentFrame]} ${message}`);\r\n                    this.currentFrame = (this.currentFrame + 1) % this.frames.length;\r\n                }, 80);\r\n            }\r\n\r\n            stop(successMessage: string): void {\r\n                if (this.interval) {\r\n                    clearInterval(this.interval);\r\n                    this.interval = null;\r\n                }\r\n\r\n                if (successMessage === '') {\r\n                    // Clear the current line and move cursor up to remove the loader completely\r\n                    process.stdout.write('\\r\\x1b[K\\x1b[1A\\x1b[K');\r\n                } else {\r\n                    process.stdout.write(`\\r${successMessage}                          \\n\\n`);\r\n                }\r\n            }\r\n\r\n            stopWithError(errorMessage: string): void {\r\n                if (this.interval) {\r\n                    clearInterval(this.interval);\r\n                    this.interval = null;\r\n                }\r\n                process.stdout.write(`\\r ${errorMessage}                          \\n\\n`);\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/app/index.ts\r\n//\r\n// Developed with  by Maysara.\r\n\r\n\r\n\r\n//  PACK \r\n\r\n    import { cli }                          from '@minejs/cli';\r\n    import * as types                       from \"../types\";\r\n    import { SpaceManager }                 from './mod/spaceManager';\r\n    import { PackageManagerWrapper }        from './mod/packageManager';\r\n    import { PromptHelper }                 from './mod/promptHelper';\r\n    import { Loader }                       from './mod/loader';\r\n    import { spawnSync }                    from 'child_process';\r\n    import * as path                        from 'path';\r\n    import * as fs                          from 'fs';\r\n\r\n// \r\n\r\n\r\n\r\n//  CORE \r\n\r\n    export class App {\r\n\r\n        //  INIT \r\n\r\n            private spaceManager    : SpaceManager;\r\n            private pm              : PackageManagerWrapper | null = null;\r\n\r\n            constructor(\r\n                public config       : types.AppConfig\r\n            ) {\r\n                this.spaceManager   = new SpaceManager();\r\n                this.initPackageManager();\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  MAIN \r\n\r\n            static create(config: types.AppConfig): App {\r\n                return new App(config);\r\n            }\r\n\r\n            run() {\r\n                // CLI Setup\r\n                cli(this.config.name, this.config.version).description(this.config.desc)\r\n\r\n                //  SPACE COMMANDS \r\n\r\n                // 'init' command - create new spaces\r\n                .command({\r\n                    name            : 'init',\r\n                    description     : 'Create a new space (lib or cli)',\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'name',\r\n                            required    : false,\r\n                            default     : 'my-space',\r\n                            description : 'Name of the space (supports @org/name format)'\r\n                        }\r\n                    ],\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'type',\r\n                            flag        : '-t',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Type of space (lib or cli)'\r\n                        },\r\n                        {\r\n                            name        : 'description',\r\n                            flag        : '--desc',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Description of the space'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.InitCommandParams) => this.createNewSpaceOnGroundViaCLI(params)\r\n                })\r\n\r\n\r\n                // 'lint' command - run linter\r\n                .command({\r\n                    name            : 'lint',\r\n                    description     : 'Run linter for the current space',\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'fix',\r\n                            flag        : '--fix',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Automatically fix linting issues'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.LintParams) => this.runLint(params)\r\n                })\r\n\r\n                // 'info' command - show space information\r\n                .command({\r\n                    name            : 'info',\r\n                    description     : 'Show current space information',\r\n                    action          : () => this.showSpaceInfo()\r\n                })\r\n\r\n                //  PACKAGE MANAGER COMMANDS \r\n\r\n                // 'install' or 'i' command - install packages\r\n                .command({\r\n                    name            : 'install',\r\n                    aliases         : ['i'],\r\n                    description     : 'Install packages',\r\n                    allowDynamicArgs: true,\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'packages',\r\n                            required    : false,\r\n                            description : 'Packages to install (space-separated)'\r\n                        }\r\n                    ],\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'dev',\r\n                            flag        : '--dev',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Install as dev dependency'\r\n                        },\r\n                        {\r\n                            name        : 'global',\r\n                            flag        : '--global',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Install globally'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.InstallParams) => this.installPackages(params)\r\n                })\r\n\r\n                // 'remove' or 'r' command - remove packages\r\n                .command({\r\n                    name            : 'remove',\r\n                    aliases         : ['r'],\r\n                    description     : 'Remove packages',\r\n                    allowDynamicArgs: true,\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'packages',\r\n                            required    : true,\r\n                            description : 'Packages to remove (space-separated)'\r\n                        }\r\n                    ],\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'global',\r\n                            flag        : '--global',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Remove globally'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.RemoveParams) => this.removePackages(params)\r\n                })\r\n\r\n                // 'update' or 'up' command - update packages\r\n                .command({\r\n                    name            : 'update',\r\n                    aliases         : ['up'],\r\n                    description     : 'Update packages',\r\n                    allowDynamicArgs: true,\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'packages',\r\n                            required    : false,\r\n                            description : 'Packages to update (space-separated, or all if empty)'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.UpdateParams) => this.updatePackages(params)\r\n                })\r\n\r\n                // 'link' command - link package globally OR link global package to project\r\n                .command({\r\n                    name            : 'link',\r\n                    description     : 'Link package globally (no args) or link global package(s) to project (with package name(s))',\r\n                    allowDynamicArgs: true,\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'package',\r\n                            required    : false,\r\n                            description : 'Package name(s) to link from global (optional, supports multiple)'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.LinkParams) => this.linkPackage(params)\r\n                })\r\n\r\n                // 'unlink' command - unlink package globally OR unlink global package from project\r\n                .command({\r\n                    name            : 'unlink',\r\n                    description     : 'Unlink package globally (no args) or unlink global package(s) from project (with package name(s))',\r\n                    allowDynamicArgs: true,\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'package',\r\n                            required    : false,\r\n                            description : 'Package name(s) to unlink from global (optional, supports multiple)'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.LinkParams) => this.unlinkPackage(params)\r\n                })\r\n\r\n                // 'list' or 'ls' command - list installed packages\r\n                .command({\r\n                    name            : 'list',\r\n                    aliases         : ['ls'],\r\n                    description     : 'List installed packages',\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'global',\r\n                            flag        : '--global',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'List global packages'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.ListParams) => this.listPackages(params)\r\n                })\r\n\r\n                //  BUILD & TEST COMMANDS \r\n\r\n                // 'build' command - build the space\r\n                .command({\r\n                    name            : 'build',\r\n                    description     : 'Build the current space',\r\n                    action          : () => this.buildSpace()\r\n                })\r\n\r\n                // 'test' command - run tests\r\n                .command({\r\n                    name            : 'test',\r\n                    description     : 'Run tests for the current space',\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'path',\r\n                            required    : false,\r\n                            description : 'Specific test file or folder (optional)'\r\n                        }\r\n                    ],\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'coverage',\r\n                            flag        : '--coverage',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Generate code coverage report'\r\n                        },\r\n                        {\r\n                            name        : 'watch',\r\n                            flag        : '--watch',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Run tests in watch mode'\r\n                        },\r\n                        {\r\n                            name        : 'bail',\r\n                            flag        : '--bail',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Exit on first test failure'\r\n                        },\r\n                        {\r\n                            name        : 'timeout',\r\n                            flag        : '--timeout',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Set test timeout in milliseconds'\r\n                        },\r\n                        {\r\n                            name        : 'rerun-each',\r\n                            flag        : '--rerun-each',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Re-run each test N times'\r\n                        },\r\n                        {\r\n                            name        : 'concurrent',\r\n                            flag        : '--concurrent',\r\n                            type        : 'boolean',\r\n                            required    : false,\r\n                            description : 'Run tests concurrently'\r\n                        },\r\n                        {\r\n                            name        : 'coverage-reporter',\r\n                            flag        : '--coverage-reporter',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Coverage reporter format (text, lcov, etc.)'\r\n                        },\r\n                        {\r\n                            name        : 'test-name-pattern',\r\n                            flag        : '-t',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Filter tests by name pattern'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.TestParams) => this.runTests(params)\r\n                })\r\n\r\n                // 'run' command - run any script from package.json\r\n                .command({\r\n                    name                : 'run',\r\n                    description         : 'Run any script from package.json',\r\n\r\n                    args: [\r\n                        {\r\n                            name        : 'script',\r\n                            required    : true,\r\n                            description : 'Script name from package.json'\r\n                        }\r\n                    ],\r\n\r\n                    allowDynamicArgs    : true,    // Allow additional arguments\r\n                    allowDynamicOptions : true,    // Allow additional options\r\n\r\n                    action: (params: types.RunScriptParams) => this.runScript(params)\r\n                })\r\n\r\n                // 'clean' command - clean build artifacts\r\n                .command({\r\n                    name            : 'clean',\r\n                    description     : 'Clean build artifacts',\r\n                    action          : () => this.clean()\r\n                })\r\n\r\n                // 'start' command - start the main file\r\n                .command({\r\n                    name                : 'start',\r\n                    description         : 'Start the main file',\r\n                    allowDynamicArgs    : true,    // Allow any arguments to pass through\r\n                    allowDynamicOptions : true,    // Allow any options to pass through\r\n                    action              : (params: types.StartParams) => this.startMain(params)\r\n                })\r\n\r\n                //  PUBLISH COMMAND \r\n\r\n                // 'publish' command - publish to npm\r\n                .command({\r\n                    name            : 'publish',\r\n                    description     : 'Publish space to npm registry',\r\n\r\n                    options: [\r\n                        {\r\n                            name        : 'tag',\r\n                            flag        : '--tag',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Publish with tag (e.g., beta, next)'\r\n                        },\r\n                        {\r\n                            name        : 'access',\r\n                            flag        : '--access',\r\n                            type        : 'string',\r\n                            required    : false,\r\n                            description : 'Access level (public or restricted)'\r\n                        }\r\n                    ],\r\n\r\n                    action: (params: types.PublishParams) => this.publish(params)\r\n                })\r\n\r\n                // Build and run CLI\r\n                .build().run();\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  HELP \r\n\r\n            static defaultConfig(): types.AppConfig {\r\n                return {\r\n                    name    : 'Space',\r\n                    version : '0.0.1',\r\n                    desc    : 'Build flexible spaces for any platform',\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Initialize package manager based on space config\r\n             */\r\n            private initPackageManager() {\r\n                if (this.spaceManager.isSpace()) {\r\n                    // Always use bun - no need to check config\r\n                    this.pm = new PackageManagerWrapper();\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Ensure we're in a space directory\r\n             */\r\n            private ensureSpace(): boolean {\r\n                if (!this.spaceManager.isSpace()) {\r\n                    console.error(' Not a space directory. Run \"space init <name> -t lib|cli\" first.');\r\n                    return false;\r\n                }\r\n                return true;\r\n            }\r\n\r\n            /**\r\n             * Parse package name to extract org and name\r\n             * Examples:\r\n             *   \"@minejs/ast\" -> { org: \"minejs\", name: \"ast\" }\r\n             *   \"my-package\" -> { org: \"\", name: \"my-package\" }\r\n             */\r\n            private parsePackageName(fullName: string): { org: string; name: string } {\r\n                const orgRegex = /^@([a-z0-9-_]+)\\/([a-z0-9-_]+)$/i;\r\n                const match = fullName.match(orgRegex);\r\n\r\n                if (match) {\r\n                    return {\r\n                        org: match[1],\r\n                        name: match[2]\r\n                    };\r\n                }\r\n\r\n                return {\r\n                    org: '',\r\n                    name: fullName\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Delete directory with retry logic for Windows file locking issues\r\n             */\r\n            private async deleteDirectoryWithRetry(dirPath: string, maxRetries: number = 3): Promise<void> {\r\n                for (let i = 0; i < maxRetries; i++) {\r\n                    try {\r\n                        // Try to delete\r\n                        fs.rmSync(dirPath, { recursive: true, force: true, maxRetries: 3, retryDelay: 100 });\r\n\r\n                        // Verify deletion\r\n                        if (!fs.existsSync(dirPath)) {\r\n                            return; // Success!\r\n                        }\r\n                    } catch (error: unknown) {\r\n                        if (i === maxRetries - 1) {\r\n                            // Last attempt failed\r\n                            throw error;\r\n                        }\r\n\r\n                        // Wait before retry (increasing delay)\r\n                        await new Promise(resolve => setTimeout(resolve, 500 * (i + 1)));\r\n                    }\r\n                }\r\n\r\n                throw new Error('Failed to delete directory after multiple attempts');\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  SPACE \r\n\r\n            /**\r\n             * Create a new space via CLI\r\n             */\r\n            private async createNewSpaceOnGroundViaCLI(params: types.InitCommandParams) {\r\n                try {\r\n                    // Prompt for missing parameters\r\n                    const answers = await PromptHelper.promptInit({\r\n                        type            : params.options.type,\r\n                        template        : params.options.template,\r\n\r\n                        org             : '',\r\n                        name            : params.args.name,\r\n                        desc            : params.options.desc,\r\n                    });\r\n\r\n                    // Parse package name to extract org and actual name\r\n                    const { org, name } = this.parsePackageName(answers.name);\r\n\r\n                    // Validate type\r\n                    if (!['lib', 'cli', 'server', 'web'].includes(answers.type)) {\r\n                        PromptHelper.showError('Invalid space type. Must be lib, cli, server or web.');\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    // Validate template\r\n                    const { TemplateRegistry } = await import('./mod/templateRegistry');\r\n                    if (!TemplateRegistry.isValidTemplate(answers.type, answers.template as types.TemplateVariant)) {\r\n                        PromptHelper.showError('Invalid template for this space type.');\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    // Check if template is ready\r\n                    if (!TemplateRegistry.isTemplateReady(answers.type, answers.template as types.TemplateVariant)) {\r\n                        PromptHelper.showError('This template is not ready yet. Please choose another template.');\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    // Determine the target space path\r\n                    let spacePath: string | undefined;\r\n\r\n                    // Get current directory name\r\n                    const currentDirName = path.basename(process.cwd());\r\n\r\n                    // Check if name is empty and ask if user wants to use current directory\r\n                    if (!name || name.trim() === '') {\r\n                        const useCurrentDir = await PromptHelper.promptUseCurrentDir(currentDirName);\r\n\r\n                        if (useCurrentDir) {\r\n                            spacePath = process.cwd();\r\n                        } else {\r\n                            PromptHelper.showError('Space name is required when not using current directory');\r\n                            process.exit(1);\r\n                        }\r\n                    }\r\n                    // Check if folder name matches project name\r\n                    else if (currentDirName === name) {\r\n                        const useCurrentDir = await PromptHelper.promptUseCurrentDir(name);\r\n\r\n                        if (useCurrentDir) {\r\n                            spacePath = process.cwd();\r\n                        }\r\n                    }\r\n\r\n                    // If spacePath not set, use default (create subdirectory)\r\n                    if (!spacePath) {\r\n                        spacePath = path.join(process.cwd(), name);\r\n                    }\r\n\r\n                    // Check if space path already exists\r\n                    if (fs.existsSync(spacePath)) {\r\n                        const isDir = fs.statSync(spacePath).isDirectory();\r\n                        if (!isDir) {\r\n                            PromptHelper.showError(`Path \"${spacePath}\" exists but is not a directory`);\r\n                            process.exit(1);\r\n                        }\r\n\r\n                        // Directory exists, ask user what to do\r\n                        const shouldDelete = await PromptHelper.promptDeleteExistingDir(spacePath);\r\n\r\n                        if (!shouldDelete) {\r\n                            PromptHelper.showInfo('Space creation cancelled');\r\n                            process.exit(0);\r\n                        }\r\n\r\n                        // Delete the directory with retry logic\r\n                        try {\r\n                            await this.deleteDirectoryWithRetry(spacePath);\r\n                        } catch (error: unknown) {\r\n                            if (error instanceof Error) {\r\n                                const isLockError = error.message &&\r\n                                    (error.message.includes('EBUSY') ||\r\n                                    error.message.includes('EPERM') ||\r\n                                    error.message.includes('resource busy'));\r\n\r\n                                if (isLockError) {\r\n                                    PromptHelper.showError(\r\n                                        `Cannot delete directory - it's being used by another program.\\n\\n` +\r\n                                        `Please try:\\n` +\r\n                                        `  1. Close any terminals/editors with \"${spacePath}\" open\\n` +\r\n                                        `  2. Navigate out of the directory in all terminals\\n` +\r\n                                        `  3. Run PowerShell/Terminal as Administrator\\n` +\r\n                                        `  4. Wait a few seconds and try again`\r\n                                    );\r\n                                } else {\r\n                                    PromptHelper.showError(\r\n                                        `Failed to delete existing directory.`,\r\n                                        error\r\n                                    );\r\n                                }\r\n                            } else {\r\n                                PromptHelper.showError(\r\n                                    `Failed to delete existing directory.`,\r\n                                    new Error('Unknown error')\r\n                                );\r\n                            }\r\n\r\n                            process.exit(1);\r\n                        }\r\n                    }\r\n\r\n                    // // Show info about org detection\r\n                    // if (org) {\r\n                    //     console.log(` Detected organization: @${org}`);\r\n                    //     console.log(` Package name: ${name}`);\r\n                    // }\r\n\r\n                    // // Show template info\r\n                    // const templateInfo = TemplateRegistry.getTemplate(answers.type, answers.template);\r\n                    // if (templateInfo?.deps) {\r\n                    //     console.log(` Includes: ${templateInfo.deps.join(', ')}`);\r\n                    // }\r\n\r\n                    await this.spaceManager.createSpace({\r\n                        type            : answers.type,\r\n                        template        : answers.template as types.TemplateVariant,\r\n                        pm              : 'bun', // Always use bun\r\n\r\n                        repo           : {\r\n                            org        : org,\r\n                            name       : name,\r\n                            version    : '0.0.1',\r\n                            desc       : answers.description,\r\n                            kw         : answers.keywords.length > 0 ? answers.keywords : [],\r\n                            license    : answers.license || 'MIT',\r\n                        },\r\n\r\n                        author          : {\r\n                            id          : answers.githubId,\r\n                            name        : answers.author,\r\n                            email       : answers.authorEmail,\r\n                            url         : '', // Will be generated in spaceManager\r\n                        },\r\n\r\n                        createdAt       : new Date().toISOString()\r\n                    }, spacePath);\r\n\r\n                    PromptHelper.showSuccess(name, [\r\n                        spacePath === process.cwd() ? 'space install' :\r\n                        `cd ${name}`,\r\n                        `space install`,\r\n                        'space build'\r\n                    ]);\r\n                } catch (error) {\r\n                    PromptHelper.showError('Failed to create space', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Show information about current space\r\n             * Safely handles template placeholders and unexpected data types\r\n             */\r\n            private showSpaceInfo() {\r\n                if (!this.ensureSpace()) return;\r\n\r\n                const config = this.spaceManager.loadSpaceConfig();\r\n                if (!config) {\r\n                    console.error(' Could not load space configuration.');\r\n                    return;\r\n                }\r\n\r\n                console.log('');\r\n\r\n                // Safe access to org - check if it exists and is not empty\r\n                const hasOrg = config.repo?.org && config.repo.org.trim() !== '';\r\n                const fullName = hasOrg\r\n                    ? `${config.repo.org}/${config.repo.name}`\r\n                    : config.repo.name;\r\n\r\n                console.log(`Name:            ${fullName}`);\r\n                console.log(`Type:            ${config.type}`);\r\n                console.log(`Version:         ${config.repo.version}`);\r\n\r\n                // Safe description handling\r\n                if (config.repo.desc && config.repo.desc !== '{{desc}}' && config.repo.desc !== '{{description}}') {\r\n                    console.log(`Description:     ${config.repo.desc}`);\r\n                }\r\n\r\n                // Safe keywords handling - check if it's an array and not empty\r\n                if (config.repo.kw) {\r\n                    // Normalize to array if it's a string\r\n                    let keywords: string[] = [];\r\n\r\n                    if (Array.isArray(config.repo.kw)) {\r\n                        keywords = config.repo.kw.filter((k: unknown) =>\r\n                            k &&\r\n                            typeof k === 'string' &&\r\n                            k.trim() !== '' &&\r\n                            k !== '{{kw}}' &&\r\n                            k !== '{{keywords}}'\r\n                        );\r\n                    } else if (typeof config.repo.kw === 'string') {\r\n                        const kwString = config.repo.kw as string;\r\n                        if (kwString !== '{{kw}}' &&\r\n                            kwString !== '{{keywords}}' &&\r\n                            kwString.trim() !== '') {\r\n                            // If it's a string, try to split by comma\r\n                            keywords = kwString\r\n                                .split(',')\r\n                                .map((k: string) => k.trim())\r\n                                .filter((k: string) => k !== '');\r\n                        }\r\n                    }\r\n\r\n                    if (keywords.length > 0) {\r\n                        console.log(`Keywords:        ${keywords.join(', ')}`);\r\n                    }\r\n                }\r\n\r\n                // Safe license handling\r\n                if (config.repo.license && config.repo.license !== '{{license}}') {\r\n                    console.log(`License:         ${config.repo.license}`);\r\n                }\r\n\r\n                console.log(`PackageManager:  bun`);\r\n\r\n                // Safe author name handling\r\n                if (config.author?.name &&\r\n                    config.author.name !== '{{author}}' &&\r\n                    config.author.name !== '{{author_name}}') {\r\n                    console.log(`Author:          ${config.author.name}`);\r\n                }\r\n\r\n                console.log(`Created:         ${new Date(config.createdAt).toLocaleDateString()}`);\r\n\r\n                console.log('');\r\n            }\r\n\r\n            /**\r\n             * Run linter\r\n             */\r\n            private runLint(params?: types.LintParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const args: string[] = [];\r\n\r\n                // Add --fix flag if specified\r\n                if (params?.options?.fix) {\r\n                    args.push('--fix');\r\n                }\r\n\r\n                // Run lint with args\r\n                if (args.length > 0) {\r\n                    this.pm!.run('lint', args);\r\n                } else {\r\n                    this.pm!.run('lint');\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  PKG MGR \r\n\r\n            /**\r\n             * Install packages\r\n             */\r\n            private async installPackages(params: types.InstallParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                try {\r\n                    // Collect packages from both args and dynamicArgs\r\n                    let packages: string[] = [];\r\n\r\n                    if (params.args?.packages) {\r\n                        const parsedPackages = params.args.packages.split(' ').filter((p: string) => p.trim());\r\n                        packages.push(...parsedPackages);\r\n                    }\r\n\r\n                    if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                        packages.push(...params.dynamicArgs);\r\n                    }\r\n\r\n                    let isDev = params.options?.dev || false;\r\n\r\n                    // If no packages provided, prompt\r\n                    if (packages.length === 0) {\r\n                        const shouldInstallAll = await PromptHelper.promptConfirm(\r\n                            'No packages specified. Install all dependencies from package.json?',\r\n                            true\r\n                        );\r\n\r\n                        if (!shouldInstallAll) {\r\n                            const installAnswers    = await PromptHelper.promptInstall();\r\n                            packages                = installAnswers.packages;\r\n                            isDev                   = installAnswers.isDev;\r\n                        }\r\n                    }\r\n\r\n                    this.pm!.install(packages.length > 0 ? packages : undefined, {\r\n                        dev: isDev,\r\n                        global: params.options?.global\r\n                    });\r\n                } catch (error) {\r\n                    PromptHelper.showError(' Installation failed', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Remove packages\r\n             */\r\n            private async removePackages(params: types.RemoveParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                try {\r\n                    // Collect packages from both args and dynamicArgs\r\n                    const packages: string[] = [];\r\n\r\n                    if (params.args?.packages) {\r\n                        const parsedPackages = params.args.packages.split(' ').filter((p: string) => p.trim());\r\n                        packages.push(...parsedPackages);\r\n                    }\r\n\r\n                    if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                        packages.push(...params.dynamicArgs);\r\n                    }\r\n\r\n                    if (packages.length === 0) {\r\n                        PromptHelper.showError('Please specify packages to remove');\r\n                        return;\r\n                    }\r\n\r\n                    // Confirm removal\r\n                    const removeAnswers = await PromptHelper.promptRemove(packages);\r\n\r\n                    if (!removeAnswers.confirm) {\r\n                        PromptHelper.showInfo('Removal cancelled');\r\n                        return;\r\n                    }\r\n\r\n                    this.pm!.remove(packages, {\r\n                        global: params.options?.global\r\n                    });\r\n                } catch (error) {\r\n                    PromptHelper.showError(' Removal failed', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Update packages\r\n             */\r\n            private async updatePackages(params: types.UpdateParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                try {\r\n                    // Collect packages from both args and dynamicArgs\r\n                    let packages: string[] | undefined = undefined;\r\n\r\n                    if (params.args?.packages) {\r\n                        const parsedPackages = params.args.packages.split(' ').filter((p: string) => p.trim());\r\n                        packages = parsedPackages.length > 0 ? parsedPackages : undefined;\r\n                    }\r\n\r\n                    if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                        if (!packages) packages = [];\r\n                        packages.push(...params.dynamicArgs);\r\n                    }\r\n\r\n                    // If no packages specified, prompt\r\n                    if (!packages || packages.length === 0) {\r\n                        const updateAnswers = await PromptHelper.promptUpdate();\r\n                        packages            = updateAnswers.updateAll ? undefined : updateAnswers.packages;\r\n                    }\r\n\r\n                    this.pm!.update(packages);\r\n                } catch (error) {\r\n                    PromptHelper.showError(' Update failed', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Link package globally or link global package to project\r\n             */\r\n            private linkPackage(params?: types.LinkParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                // Collect package names from args and dynamicArgs\r\n                const packages: string[] = [];\r\n\r\n                if (params?.args?.package) {\r\n                    if (typeof params.args.package === 'string') {\r\n                        packages.push(params.args.package);\r\n                    } else if (Array.isArray(params.args.package)) {\r\n                        packages.push(...params.args.package);\r\n                    }\r\n                }\r\n\r\n                if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                    packages.push(...params.dynamicArgs);\r\n                }\r\n\r\n                this.pm!.link(packages.length > 0 ? packages : undefined);\r\n            }\r\n\r\n            /**\r\n             * Unlink package globally or unlink global package from project\r\n             */\r\n            private unlinkPackage(params?: types.LinkParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                // Collect package names from args and dynamicArgs\r\n                const packages: string[] = [];\r\n\r\n                if (params?.args?.package) {\r\n                    if (typeof params.args.package === 'string') {\r\n                        packages.push(params.args.package);\r\n                    } else if (Array.isArray(params.args.package)) {\r\n                        packages.push(...params.args.package);\r\n                    }\r\n                }\r\n\r\n                if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                    packages.push(...params.dynamicArgs);\r\n                }\r\n\r\n                this.pm!.unlink(packages.length > 0 ? packages : undefined);\r\n            }\r\n\r\n            /**\r\n             * List packages\r\n             */\r\n            private listPackages(params: types.ListParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                this.pm!.list({\r\n                    global: params.options?.global ?? false\r\n                });\r\n            }\r\n\r\n            /**\r\n             * Run any script from package.json\r\n             */\r\n            private runScript(params: types.RunScriptParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const scriptName = params?.args?.script;\r\n\r\n                if (!scriptName) {\r\n                    PromptHelper.showError('Please specify a script name');\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    // Collect dynamic args and options\r\n                    const args: string[] = [];\r\n\r\n                    if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                        args.push(...params.dynamicArgs);\r\n                    }\r\n\r\n                    if (params?.dynamicOptions && typeof params.dynamicOptions === 'object') {\r\n                        for (const [key, value] of Object.entries(params.dynamicOptions)) {\r\n                            args.push(`--${key}`);\r\n                            if (value !== true && value !== false) {\r\n                                args.push(String(value));\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // console.log(` Running script: ${scriptName}${args.length > 0 ? ' ' + args.join(' ') : ''}\\n`);\r\n                    this.pm!.run(scriptName, args.length > 0 ? args : undefined);\r\n                } catch (error) {\r\n                    PromptHelper.showError(`Failed to run script \"${scriptName}\"`, error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n\r\n        //  BUILD \r\n\r\n            /**\r\n             * Build the current space\r\n             */\r\n            private buildSpace(silently?: boolean) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const loader = new Loader();\r\n                loader.start('Building space...');\r\n\r\n                try {\r\n                    this.pm!.runSilent('build');\r\n                    loader.stop(silently ? '' : ' Build succeeded');\r\n                } catch {\r\n                    loader.stopWithError(' Build failed');\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            private buildSpaceBool(silently?: boolean) : boolean{\r\n                if (!this.ensureSpace()) return false;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const loader = new Loader();\r\n                loader.start('Building space...');\r\n\r\n                try {\r\n                    this.pm!.runSilent('build');\r\n                    loader.stop(silently ? '' : ' Build succeeded');\r\n                    return true;\r\n                } catch {\r\n                    loader.stopWithError(' Build failed!');\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Run tests\r\n             */\r\n            private runTests(params?: types.TestParams) {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                // Build args array for bun test\r\n                const args: string[] = [];\r\n\r\n                // Add test path if specified\r\n                const testPath = params?.args?.path;\r\n                if (testPath) {\r\n                    args.push(testPath);\r\n                }\r\n\r\n                // Add coverage flag\r\n                if (params?.options?.coverage) {\r\n                    args.push('--coverage');\r\n                }\r\n\r\n                // Add coverage reporter\r\n                if (params?.options?.['coverage-reporter']) {\r\n                    args.push('--coverage-reporter', params.options['coverage-reporter']);\r\n                }\r\n\r\n                // Add watch flag\r\n                if (params?.options?.watch) {\r\n                    args.push('--watch');\r\n                }\r\n\r\n                // Add bail flag\r\n                if (params?.options?.bail) {\r\n                    args.push('--bail');\r\n                }\r\n\r\n                // Add timeout\r\n                if (params?.options?.timeout) {\r\n                    args.push('--timeout', params.options.timeout);\r\n                }\r\n\r\n                // Add rerun-each\r\n                if (params?.options?.['rerun-each']) {\r\n                    args.push('--rerun-each', params.options['rerun-each']);\r\n                }\r\n\r\n                // Add concurrent\r\n                if (params?.options?.concurrent) {\r\n                    args.push('--concurrent');\r\n                }\r\n\r\n                // Add test name pattern\r\n                if (params?.options?.['test-name-pattern']) {\r\n                    args.push('-t', params.options['test-name-pattern']);\r\n                }\r\n\r\n                // Run tests with args\r\n                if (args.length > 0) {\r\n                    this.pm!.run('test', args);\r\n                } else {\r\n                    this.pm!.run('test');\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Clean build artifacts\r\n             */\r\n            private clean() {\r\n                if (!this.ensureSpace()) return;\r\n                if (!this.pm) this.initPackageManager();\r\n\r\n                const loader = new Loader();\r\n                loader.start('Cleaning build artifacts...');\r\n\r\n                try {\r\n                    this.pm!.run('clean');\r\n                    loader.stop(' Clean complete!');\r\n                } catch {\r\n                    loader.stopWithError(' Clean failed!');\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Start the main file - builds silently first, then runs\r\n             */\r\n            private startMain(params?: types.StartParams) {\r\n                if (!this.buildSpaceBool(true)) return;\r\n\r\n                try {\r\n                    // Step 1: Find the built main file\r\n                    const mainFile = this.findBuiltMainFile();\r\n\r\n                    if (!mainFile) {\r\n                        PromptHelper.showError(\r\n                            'Could not find built entry point.\\n' +\r\n                            'Expected to find dist/index.js or dist/index.js after build.'\r\n                        );\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    // Step 2: Collect ALL arguments (dynamic args from CLI)\r\n                    const args: string[] = [];\r\n\r\n                    // Get dynamic args (all unnamed args passed after 'start')\r\n                    if (params?.dynamicArgs && Array.isArray(params.dynamicArgs)) {\r\n                        args.push(...params.dynamicArgs);\r\n                    }\r\n\r\n                    // Get dynamic options (all --flags passed)\r\n                    if (params?.dynamicOptions && typeof params.dynamicOptions === 'object') {\r\n                        for (const [key, value] of Object.entries(params.dynamicOptions)) {\r\n                            args.push(`--${key}`);\r\n                            if (value !== true && value !== false) {\r\n                                args.push(String(value));\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // Step 3: Show what we're running\r\n                    if (args.length > 0) {\r\n                        // console.log(` Running: bun ${mainFile} ${args.join(' ')}\\n`);\r\n                    } else {\r\n                        // console.log(` Running: bun ${mainFile}\\n`);\r\n                    }\r\n\r\n                    // Step 4: Run the built file with bun\r\n                    const result = spawnSync('bun', [mainFile, ...args], {\r\n                        stdio: 'inherit',\r\n                        cwd: process.cwd()\r\n                    });\r\n\r\n                    if (result.error) {\r\n                        PromptHelper.showError('Failed to start process', result.error as Error);\r\n                        process.exit(1);\r\n                    }\r\n\r\n                    if (result.status !== 0 && result.status !== null) {\r\n                        console.error('\\n Process exited with error');\r\n                        process.exit(result.status);\r\n                    }\r\n                } catch (error) {\r\n                    PromptHelper.showError('Failed to start', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Find the built main entry file (after build)\r\n             */\r\n            private findBuiltMainFile(): string | null {\r\n                const possiblePaths = [\r\n                    'dist/index.js',\r\n                    'dist/index.js',\r\n                    'dist/app.js'\r\n                ];\r\n\r\n                // Try built files first\r\n                for (const filePath of possiblePaths) {\r\n                    if (fs.existsSync(path.join(process.cwd(), filePath))) {\r\n                        return filePath;\r\n                    }\r\n                }\r\n\r\n                // Fallback: Check package.json main field\r\n                try {\r\n                    const packageJsonPath = path.join(process.cwd(), 'package.json');\r\n                    if (fs.existsSync(packageJsonPath)) {\r\n                        const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf-8'));\r\n\r\n                        if (packageJson.main && fs.existsSync(packageJson.main)) {\r\n                            return packageJson.main;\r\n                        }\r\n                    }\r\n                } catch {\r\n                    // Ignore package.json errors\r\n                }\r\n\r\n                return null;\r\n            }\r\n\r\n            /**\r\n             * Publish to npm\r\n             */\r\n            private async publish(params: types.PublishParams) {\r\n                if(!this.buildSpaceBool(true)) return;\r\n                try {\r\n                    const config = this.spaceManager.loadSpaceConfig();\r\n                    if (!config) {\r\n                        PromptHelper.showError('Could not load space configuration');\r\n                        return;\r\n                    }\r\n\r\n                    const fullName = config.repo.org\r\n                        ? `@${config.repo.org}/${config.repo.name}`\r\n                        : config.repo.name;\r\n\r\n                    // Prompt for publish options if not provided\r\n                    let tag     = params.options?.tag     || undefined;\r\n                    let access  = params.options?.access  || undefined;\r\n\r\n                    if (!tag && !access) {\r\n                        const publishAnswers = await PromptHelper.promptPublish(fullName);\r\n\r\n                        if (!publishAnswers.confirm) {\r\n                            PromptHelper.showInfo('Publish cancelled');\r\n                            return;\r\n                        }\r\n\r\n                        tag     = publishAnswers.tag;\r\n                        access  = publishAnswers.access;\r\n                    }\r\n\r\n                    const loader = new Loader();\r\n                    loader.start('Publishing package...');\r\n\r\n                    this.pm!.publish({\r\n                        tag,\r\n                        access: access as types.PublishAccess\r\n                    }, loader);\r\n                } catch (error) {\r\n                    PromptHelper.showError('Publish failed', error as Error);\r\n                    process.exit(1);\r\n                }\r\n            }\r\n\r\n        // \r\n\r\n    }\r\n\r\n// ","// src/index.ts\n//\n// Made with  by Maysara.\n\n\n\n//  PACK \n\n    import { App } from './app';\n\n// \n\n\n\n//  INIT \n\n    const app = App.create({\n        name        : 'Space',\n        version     : '0.0.2',\n        desc        : 'Build flexible spaces for any platform',\n    });\n\n    app.run();\n\n// "]}